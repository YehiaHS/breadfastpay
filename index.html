<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=1200, initial-scale=0.3, minimum-scale=0.1, maximum-scale=2.0, user-scalable=yes">
    <title>Breadfast Pay - 12 Step Campaign</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root {
            --primary: #b2288e;
            /* Breadfast Purple */
            --secondary: #edffef;
            /* Mint Green */
            --accent: #FDCB6E;
            /* Warm Yellow */
            --text-dark: #2d3436;
            --text-light: #ffffff;
            --glass-white: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.5);
            --slide-shadow: 0 20px 50px rgba(178, 40, 142, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: #ffffff;
            color: var(--text-dark);
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }

        /* 3D Canvas Background */
        #canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            background: linear-gradient(180deg, #ffffff 0%, #f3f0ff 100%);
        }

        #canvas-container canvas {
            width: 100%;
            height: 100%;
            display: block;
            pointer-events: none;
        }

        /* Memphis Decorative Elements */
        .memphis-shape {
            position: absolute;
            z-index: 0;
            opacity: 0.6;
            pointer-events: none;
        }

        .shape-squiggle {
            width: 100px;
            height: 20px;
            background-image: url("data:image/svg+xml,%3Csvg width='40' height='10' viewBox='0 0 40 10' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 5 Q 10 0 20 5 T 40 5' stroke='%23b2288e' fill='none' stroke-width='4'/%3E%3C/svg%3E");
            background-size: 40px 10px;
        }

        .shape-dots {
            width: 150px;
            height: 150px;
            background-image: radial-gradient(#b2288e 15%, transparent 16%);
            background-size: 20px 20px;
        }

        /* Slides Container */
        .slider-container {
            position: relative;
            height: 100vh;
            width: 100vw;
            display: flex;
            align-items: center;
            justify-content: center;
            perspective: 1200px;
            z-index: 2;
        }

        .slide {
            position: absolute;
            width: 78%;
            max-width: 1200px;
            height: auto;
            min-height: 70vh;
            max-height: 85vh;
            padding: 3rem 4rem;
            background: var(--glass-white);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 2px solid var(--glass-border);
            border-radius: 40px;
            box-shadow: var(--slide-shadow);
            text-align: left;
            opacity: 0;
            transform: translateY(60px) rotateX(-5deg);
            visibility: hidden;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            overflow-y: auto;
            /* Allow scrolling if content is too long */
        }

        .slide.active {
            opacity: 1;
            transform: translateY(0) rotateX(0deg);
            visibility: visible;
            z-index: 10;
        }

        /* 3D visuals render in a single fullscreen canvas */

        /* Headers with Step Numbers */
        .step-tag {
            background: var(--primary);
            color: #fff;
            padding: 0.25rem 0.8rem;
            border-radius: 50px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 700;
            display: inline-block;
            margin-bottom: 0.5rem;
        }

        h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: var(--text-dark);
            font-weight: 700;
            line-height: 1.1;
        }

        h3 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
            text-transform: uppercase;
            font-weight: 800;
        }

        p {
            font-size: 1.1rem;
            line-height: 1.5;
            color: #555;
            margin-bottom: 1rem;
        }

        /* Grid Layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2.5rem;
            align-items: start;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        /* Cards & Boxes */
        .floating-card {
            background: #ffffff;
            padding: 1.5rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.05);
            margin-bottom: 1rem;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
            margin-top: 0.5rem;
        }

        .data-table th,
        .data-table td {
            text-align: left;
            padding: 0.8rem;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            color: var(--primary);
        }

        .stat-box {
            background: var(--secondary);
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
        }

        .stat-val {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            display: block;
        }

        .stat-lbl {
            font-size: 0.8rem;
            text-transform: uppercase;
            color: #666;
        }

        /* Controls */
        .controls {
            position: absolute;
            bottom: 2rem;
            right: 3rem;
            display: flex;
            gap: 1rem;
            z-index: 100;
        }

        button {
            background: var(--primary);
            border: none;
            color: white;
            padding: 0.8rem 1.6rem;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            font-weight: 700;
            box-shadow: 0 10px 20px rgba(178, 40, 142, 0.3);
            transition: all 0.3s;
        }

        button:hover {
            transform: translateY(-3px);
        }

        .progress {
            position: absolute;
            bottom: 2.5rem;
            left: 3rem;
            font-weight: 700;
            color: var(--primary);
        }

        .citation {
            position: absolute;
            bottom: 1rem;
            left: 3rem;
            font-size: 0.75rem;
            color: #888;
            opacity: 0.8;
            font-family: 'Outfit', sans-serif;
            max-width: 70%;
            z-index: 50;
        }

        .calendar-row {
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .calendar-row:hover {
            background-color: var(--secondary) !important;
        }

        /* Preview Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: #fff;
            padding: 10px;
            border-radius: 24px;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4);
            position: relative;
            transform: translateY(20px);
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-height: 90vh;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .modal-image {
            display: block;
            height: 80vh;
            width: auto;
            border-radius: 16px;
            object-fit: cover;
        }

        .modal-close {
            position: absolute;
            top: -15px;
            right: -15px;
            background: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            border: 3px solid white;
            z-index: 10;
        }

        .modal-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            font-size: 1.5rem;
            color: var(--primary);
            transition: all 0.2s;
            z-index: 5;
            user-select: none;
        }

        .modal-arrow:hover {
            background: var(--primary);
            color: white;
            scale: 1.1;
        }

        .modal-arrow.left {
            left: -70px;
        }

        .modal-arrow.right {
            right: -70px;
        }

        .modal-info {
            padding: 15px 20px;
            text-align: center;
            border-top: 1px solid #eee;
        }

        .modal-info h4 {
            margin: 0;
            color: var(--primary);
            font-size: 1.2rem;
        }

        .modal-info p {
            margin: 5px 0 0 0;
            font-size: 0.9rem;
            color: #555;
            line-height: 1.4;
        }

        @media (max-width: 900px) {
            .modal-arrow.left {
                left: 10px;
                background: rgba(255, 255, 255, 0.7);
            }

            .modal-arrow.right {
                right: 10px;
                background: rgba(255, 255, 255, 0.7);
            }

            .modal-image {
                height: 60vh;
                width: auto;
                max-width: 80vw;
            }
        }

        /* Landing Page Flow Modal & Dashboard Enhancements */
        .flow-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 15000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .flow-modal.active {
            display: flex;
            animation: fadeIn 0.4s ease;
        }

        .flow-content {
            background: #fff;
            width: 95%;
            max-width: 900px;
            padding: 3rem;
            border-radius: 24px;
            position: relative;
            color: #1a1a2e;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
        }

        /* Mockup Bento Grid */
        .feature-bento {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            padding: 3rem 2rem;
        }

        .bento-item {
            background: #f8f9fa;
            padding: 2.5rem 2rem;
            border-radius: 24px;
            border: 1px solid #eee;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .bento-item:hover {
            transform: translateY(-10px);
            background: #fff;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.05);
            border-color: var(--primary);
        }

        .bento-icon {
            font-size: 2.5rem;
        }

        /* Rewards Cards */
        .rewards-tier {
            display: flex;
            gap: 1.5rem;
            overflow-x: auto;
            padding: 2rem;
            scrollbar-width: none;
            justify-content: center;
        }

        .tier-card {
            min-width: 180px;
            padding: 2rem;
            border-radius: 24px;
            text-align: center;
            border: 1px solid #eee;
            background: #fff;
            transition: all 0.3s ease;
        }

        .tier-card.active {
            border-color: var(--primary);
            background: #fffafb;
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(181, 23, 158, 0.1);
        }

        /* Dashboard Layout */
        /* Refined Dashboard Layout */
        .lp-dashboard {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            height: auto;
            align-items: stretch;
        }

        .lp-sidebar {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            width: 100%;
        }

        .analytics-console {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 220px;
            background: rgba(10, 10, 30, 0.85);
            backdrop-filter: blur(6px);
            color: #00ff88;
            padding: 1rem;
            border-radius: 12px;
            font-family: monospace;
            font-size: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 100;
            pointer-events: none;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .ping {
            border-left: 2px solid #00ff88;
            padding-left: 8px;
            opacity: 0;
            animation: pingIn 0.3s forwards;
        }

        @keyframes pingIn {
            to {
                opacity: 1;
                transform: translateX(5px);
            }
        }

        .lp-mockup-fullscreen {
            position: fixed !important;
            top: 20px !important;
            left: 20px !important;
            right: 20px !important;
            bottom: 20px !important;
            width: auto !important;
            height: auto !important;
            z-index: 15000 !important;
            border-radius: 28px !important;
            background: white !important;
            box-shadow: 0 50px 100px rgba(0, 0, 0, 0.5) !important;
        }

        .lp-mockup-fullscreen #lpScrollContent {
            height: calc(100vh - 120px) !important;
        }

        @keyframes pingFade {
            0% {
                opacity: 0;
                transform: translateY(5px);
            }

            10% {
                opacity: 1;
                transform: translateY(0);
            }

            80% {
                opacity: 1;
            }

            100% {
                opacity: 0;
                transform: translateY(-5px);
            }
        }

        .lp-mockup-fullscreen {
            position: fixed !important;
            top: 20px !important;
            left: 20px !important;
            right: 20px !important;
            bottom: 20px !important;
            z-index: 2100 !important;
            height: auto !important;
            margin: 0 !important;
        }

        .lp-mockup-fullscreen #lpScrollContent {
            height: calc(100% - 45px) !important;
        }
    </style>
</head>

<body>

    <div id="canvas-container"></div>

    <div class="memphis-shape shape-dots" style="top: 5%; left: 5%;"></div>
    <div class="memphis-shape shape-squiggle" style="bottom: 10%; right: 10%; transform: rotate(-15deg);"></div>

    <div class="slider-container">

        <!-- Intro Slide -->
        <div class="slide active" data-id="0">
            <div style="text-align: center; margin: auto;">
                <h3 style="background: transparent;">Online PR & Marketing Campaign</h3>
                <h1 style="font-size: 4.5rem; color: var(--primary); margin: 1rem 0;">Breadfast Pay</h1>
                <p style="font-size: 2rem; margin-bottom: 0.5rem;">The Family Ecosystem</p>
                <p style="font-size: 1rem; color: #777; margin-bottom: 1.5rem;">"One Wallet. Two Lifestyles."</p>
                <div
                    style="background: rgba(255,255,255,0.8); padding: 1rem 2rem; border-radius: 12px; display: inline-block; margin-bottom: 1rem;">
                    <p style="margin: 0; font-size: 0.95rem; color: #555;"><strong>Janah Ahmed</strong> 229200</p>
                    <p style="margin: 0.3rem 0 0 0; font-size: 0.95rem; color: #555;"><strong>Farah Nagy</strong> 229864
                    </p>
                    <p style="margin: 0.3rem 0 0 0; font-size: 0.95rem; color: #555;"><strong>Yehia Salem</strong>
                        229916</p>
                    <p style="margin: 0.5rem 0 0 0; font-size: 0.85rem; color: #888;">Course: Online PR & Marketing ¬∑
                        December 13, 2025</p>
                </div>
                <br>
                <button onclick="document.getElementById('nextBtn').click()">Start Presentation ‚ûú</button>
            </div>
        </div>

        <!-- Abstract Slide -->
        <div class="slide" data-id="abstract">
            <span class="step-tag">Abstract</span>
            <h2>Campaign Overview</h2>
            <div class="floating-card" style="background: var(--secondary);">
                <ul style="font-size: 1rem; line-height: 1.6; margin: 0; padding-left: 1.2rem;">
                    <li>Online PR campaign to reposition <strong>Breadfast Pay</strong> from "Grocery App" to
                        <strong>"Family Ecosystem"</strong> wallet
                    </li>
                    <li>Strategy: <strong>"One Wallet. Two Lifestyles"</strong> ‚Äî dual-persona targeting
                        <strong>Moms</strong> + <strong>Gen Z</strong>
                    </li>
                    <li>Addresses inflation-driven spending scrutiny in Egyptian households</li>
                    <li><strong>PESO model</strong> with <strong>AMEC framework</strong> for measurement</li>
                </ul>
            </div>
            <div class="grid-3" style="margin-top: 1.5rem;">
                <div class="stat-box">
                    <span class="stat-val">400</span>
                    <span class="stat-lbl">Active Family Accounts</span>
                </div>
                <div class="stat-box">
                    <span class="stat-val">EGP 1M</span>
                    <span class="stat-lbl">Wallet Load Target</span>
                </div>
                <div class="stat-box">
                    <span class="stat-val">14 Days</span>
                    <span class="stat-lbl">Launch Sprint</span>
                </div>
            </div>

        </div>

        <!-- What is BreadfastPay? -->
        <div class="slide" data-id="intro-what">
            <span class="step-tag">Intro</span>
            <h2>What is Breadfast Pay?</h2>
            <p style="font-size: 1.15rem; margin-bottom: 1.5rem;">A <strong>prepaid Visa card</strong> from Breadfast,
                powered by ADIB Egypt. Spend, save, and manage money ‚Äî all from one app.</p>

            <div class="grid-3" style="gap: 2rem; align-items: start;">
                <!-- Breadfast Pay Card -->
                <div class="floating-card" style="text-align: center; border: 2px solid var(--primary);">
                    <img src="https://pay.breadfast.com/wp-content/uploads/2025/07/Breadfast-Pay-Mark-Full.png"
                        alt="Breadfast Pay" style="height: 50px; margin-bottom: 0.8rem;">
                    <video autoplay loop muted playsinline
                        style="width: 100%; border-radius: 12px; margin-bottom: 0.8rem;">
                        <source src="https://pay.breadfast.com/wp-content/uploads/2025/10/card-video.mp4#t=0,100"
                            type="video/mp4">
                    </video>
                    <h4 style="color: var(--primary); margin: 0.5rem 0;">Breadfast Pay</h4>
                    <div style="display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Visa_Inc._logo.svg/2560px-Visa_Inc._logo.svg.png"
                            alt="Visa" style="height: 20px;">
                    </div>
                    <ul style="text-align: left; font-size: 0.85rem; padding-left: 1.2rem; color: #555;">
                        <li>Cashback on groceries & coffee</li>
                        <li>Family-linked cards</li>
                        <li>Pickup at Breadfast Coffee</li>
                    </ul>
                </div>

                <!-- Telda -->
                <div class="floating-card" style="text-align: center;">
                    <img src="https://telda.app/_next/static/media/telda-logo.25c7955c.png" alt="Telda"
                        style="height: 50px; margin-bottom: 0.8rem;">
                    <img src="https://telda.app/_next/static/media/teldacard.8dc93a7e.png" alt="Telda Card"
                        style="width: 100%; border-radius: 12px; margin-bottom: 0.8rem;">
                    <h4 style="color: #000; margin: 0.5rem 0;">Telda</h4>
                    <ul style="text-align: left; font-size: 0.85rem; padding-left: 1.2rem; color: #555;">
                        <li>Customizable card designs</li>
                        <li>Individual-focused</li>
                        <li>Instant transfers</li>
                    </ul>
                </div>

                <!-- Fawry Yellow Card -->
                <div class="floating-card" style="text-align: center;">
                    <img src="https://www.fawry.com/wp-content/uploads/2022/08/Myfawry-Vertical-01-233x300.png"
                        alt="MyFawry Logo" style="height: 50px; margin-bottom: 0.8rem;">
                    <img src="https://www.fawry.com/wp-content/uploads/2023/02/mobile-header.png"
                        alt="Fawry Yellow Card"
                        style="width: 100%; border-radius: 12px; margin-bottom: 0.8rem; object-fit: contain;">
                    <h4 style="color: #f5a623; margin: 0.5rem 0;">MyFawry Yellow Card</h4>
                    <div style="display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/07/Meeza.svg/1024px-Meeza.svg.png"
                            alt="Meeza" style="height: 20px;">
                    </div>
                    <ul style="text-align: left; font-size: 0.85rem; padding-left: 1.2rem; color: #555;">
                        <li>Bill payments</li>
                        <li>Wide retail network</li>
                        <li>Utility-focused</li>
                    </ul>
                </div>
            </div>

            <div class="floating-card" style="margin-top: 1.5rem; background: var(--secondary); text-align: center;">
                <p style="margin: 0; font-size: 1rem;"><strong>Breadfast Pay's Edge:</strong> Combines
                    <em>lifestyle</em> (coffee perks) with <em>family management</em> (linked cards) ‚Äî a unique position
                    in Egypt's fintech market.
                </p>
            </div>

            <div class="citation">Sources: pay.breadfast.com, telda.app, fawry.com (2025).</div>
        </div>

        <div class="slide" data-id="1">
            <span class="step-tag">Step 1</span>
            <h2>Brand & Challenge</h2>
            <div class="grid-2">
                <div>
                    <div class="floating-card">
                        <h3>Situation Analysis</h3>
                        <ul style="font-size: 0.9rem; padding-left: 1.2rem; margin: 0;">
                            <li>Egyptian market strained by <strong>high inflation</strong></li>
                            <li>Households prioritizing essentials over discretionary items</li>
                            <li>Breadfast perceived as <strong>premium grocery service</strong> ‚Äî risky in
                                cost-conscious environment</li>
                            <li>Many fintech competitors: Fawry, Instapay, Telda</li>
                        </ul>
                    </div>
                    <div class="floating-card" style="border-left: 4px solid #e74c3c;">
                        <h3>The Challenge</h3>
                        <ul style="font-size: 0.9rem; padding-left: 1.2rem; margin: 0;">
                            <li>Families cutting "luxuries" ‚Äî specialty coffee replaced with sachets</li>
                            <li>Threatens Breadfast Pay if seen only as <strong>consumption engine</strong></li>
                            <li>Must reposition as a <strong>household management tool</strong></li>
                        </ul>
                    </div>
                </div>
                <div>
                    <div class="floating-card" style="background: var(--secondary);">
                        <h3>The Opportunity</h3>
                        <ul style="font-size: 0.9rem; padding-left: 1.2rem; margin: 0;">
                            <li>Position as both <strong>spending mechanism</strong> + <strong>budget management
                                    tool</strong></li>
                            <li>Connect grocery budget (parents) with lifestyle allowance (Gen Z)</li>
                            <li>Become <strong>central financial hub</strong> for entire household</li>
                        </ul>
                    </div>
                    <div class="floating-card">
                        <h3>Competitive Landscape</h3>
                        <ul style="font-size: 0.85rem; padding-left: 1.2rem; margin: 0;">
                            <li><strong>Breadfast Pay:</strong> Family + Lifestyle quadrant</li>
                            <li><strong>Telda/Nexta:</strong> Lifestyle focus, no household utility</li>
                            <li><strong>Fawry/Instapay:</strong> Utility dominant, no aspirational equity</li>
                            <li><strong>Klivvr:</strong> Family angle but lacks high-frequency ecosystem</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="citation">Sources: Internal Brief (2025); Fintech News Africa (2024).</div>
        </div>

        <!-- Step 1B: Macro Context -->
        <div class="slide" data-id="1b">
            <span class="step-tag">Step 1B</span>
            <h2>Strategic Context</h2>
            <div class="grid-2">
                <div>
                    <div class="floating-card" style="position: relative; height: 380px; padding: 1rem;">
                        <h3 style="margin-bottom: 1rem;">Competitive Landscape</h3>

                        <!-- Quadrant Chart -->
                        <div
                            style="position: relative; width: 100%; height: 300px; border: 1px solid #ddd; overflow: hidden; border-radius: 8px;">

                            <!-- Quadrant Backgrounds (Zoning) -->
                            <!-- Q1: Top Right (Family+Lifestyle) = The Sweet Spot -->
                            <div
                                style="position: absolute; top:0; right:0; width:50%; height:50%; background: rgba(178, 40, 142, 0.08); z-index:0;">
                                <span
                                    style="position: absolute; top: 10px; right: 10px; font-size: 0.7rem; color: var(--primary); font-weight: bold; text-transform: uppercase;">The
                                    Sweet Spot</span>
                            </div>
                            <!-- Q3: Bottom Left (Individual+Utility) = The Crowded Utilities -->
                            <div
                                style="position: absolute; bottom:0; left:0; width:50%; height:50%; background: rgba(0,0,0,0.03); z-index:0;">
                                <span
                                    style="position: absolute; bottom: 10px; left: 10px; font-size: 0.7rem; color: #999;font-weight: bold;">Utility
                                    Zone</span>
                            </div>

                            <!-- Axis Labels -->
                            <span
                                style="position: absolute; top: 5px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; color: #555; background: #fff; padding: 2px 6px; border-radius: 4px; z-index:5;">Family</span>
                            <span
                                style="position: absolute; bottom: 5px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; color: #555; background: #fff; padding: 2px 6px; border-radius: 4px; z-index:5;">Individual</span>
                            <span
                                style="position: absolute; top: 50%; left: 5px; transform: translateY(-50%) rotate(-90deg); font-size: 0.75rem; color: #555; z-index:5;">Utility</span>
                            <span
                                style="position: absolute; top: 50%; right: 5px; transform: translateY(-50%) rotate(90deg); font-size: 0.75rem; color: #555; z-index:5;">Lifestyle</span>

                            <!-- Grid Lines -->
                            <div
                                style="position: absolute; top: 50%; width: 100%; height: 1px; background: #ccc; z-index:1;">
                            </div>
                            <div
                                style="position: absolute; left: 50%; height: 100%; width: 1px; background: #ccc; z-index:1;">
                            </div>

                            <!-- Competitors -->
                            <!-- 1. Breadfast Pay (HERO) -->
                            <div style="position: absolute; top: 20%; right: 20%; text-align: center; z-index:10;">
                                <div
                                    style="width: 20px; height: 20px; background: var(--primary); border-radius: 50%; margin: 0 auto; box-shadow: 0 0 0 4px rgba(178, 40, 142, 0.2); animation: pulse 2s infinite;">
                                </div>
                                <span
                                    style="font-size: 0.9rem; font-weight: bold; color: var(--primary); background: rgba(255,255,255,0.9); padding: 0 4px; border-radius: 4px;">Breadfast
                                    Pay</span>
                            </div>

                            <!-- 2. Klivvr (Family/Utility hybrid) -->
                            <div style="position: absolute; top: 30%; right: 45%; text-align: center; z-index:5;">
                                <div
                                    style="width: 10px; height: 10px; background: #FF4500; border-radius: 50%; margin: 0 auto;">
                                </div>
                                <span style="font-size: 0.7rem; color: #666;">Klivvr</span>
                            </div>

                            <!-- 3. Fawry (Family/Utility) -->
                            <div style="position: absolute; top: 25%; left: 30%; text-align: center; z-index:5;">
                                <div
                                    style="width: 12px; height: 12px; background: #ffcc00; border-radius: 50%; margin: 0 auto;">
                                </div>
                                <span style="font-size: 0.8rem; font-weight: bold; color: #444;">Fawry</span>
                            </div>

                            <!-- 4. Telda (Individual/Lifestyle) -->
                            <div style="position: absolute; bottom: 35%; right: 15%; text-align: center; z-index:5;">
                                <div
                                    style="width: 12px; height: 12px; background: #000; border-radius: 50%; margin: 0 auto;">
                                </div>
                                <span style="font-size: 0.8rem; font-weight: bold; color: #000;">Telda</span>
                            </div>

                            <!-- 5. Nexta (Individual/Lifestyle) -->
                            <div style="position: absolute; bottom: 20%; right: 35%; text-align: center; z-index:5;">
                                <div
                                    style="width: 10px; height: 10px; background: #3498db; border-radius: 50%; margin: 0 auto;">
                                </div>
                                <span style="font-size: 0.7rem; color: #666;">Nexta</span>
                            </div>

                            <!-- 6. Lucky (Individual/Lifestyle) -->
                            <div style="position: absolute; bottom: 40%; right: 10%; text-align: center; z-index:5;">
                                <div
                                    style="width: 10px; height: 10px; background: #f1c40f; border-radius: 50%; margin: 0 auto;">
                                </div>
                                <span style="font-size: 0.7rem; color: #666;">Lucky</span>
                            </div>

                            <!-- 7. Instapay (Individual/Utility) -->
                            <div style="position: absolute; bottom: 25%; left: 35%; text-align: center; z-index:5;">
                                <div
                                    style="width: 12px; height: 12px; background: #4b0082; border-radius: 50%; margin: 0 auto;">
                                </div>
                                <span style="font-size: 0.8rem; font-weight: bold; color: #4b0082;">Instapay</span>
                            </div>

                            <!-- 8. Halan (Individual/Utility) -->
                            <div style="position: absolute; bottom: 40%; left: 15%; text-align: center; z-index:5;">
                                <div
                                    style="width: 10px; height: 10px; background: #e74c3c; border-radius: 50%; margin: 0 auto;">
                                </div>
                                <span style="font-size: 0.7rem; color: #666;">Halan</span>
                            </div>

                            <!-- 9. OPay (Individual/Utility) -->
                            <div style="position: absolute; bottom: 12%; left: 25%; text-align: center; z-index:5;">
                                <div
                                    style="width: 10px; height: 10px; background: #2ecc71; border-radius: 50%; margin: 0 auto;">
                                </div>
                                <span style="font-size: 0.7rem; color: #666;">OPay</span>
                            </div>

                            <!-- 10. Takka (Individual/Utility) -->
                            <div style="position: absolute; bottom: 8%; left: 45%; text-align: center; z-index:5;">
                                <div
                                    style="width: 10px; height: 10px; background: #34495e; border-radius: 50%; margin: 0 auto;">
                                </div>
                                <span style="font-size: 0.7rem; color: #666;">Takka</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="floating-card">
                        <h3>Strategic Pivot</h3>
                        <p style="font-style: italic;">From "Grocery App" to "Lifestyle Hub"</p>
                        <p>Breadfast isn't just for Moms anymore. Breadfast Coffee has made it a Gen Z "Third Place". We
                            must target the <strong>entire household</strong>.</p>
                    </div>
                </div>
            </div>
            <div class="citation">Sources: Fintech News Africa (2024).</div>
        </div>

        <!-- Step 2 -->
        <div class="slide" data-id="2">
            <span class="step-tag">Step 2</span>
            <h2>Audience & Insight</h2>
            <div class="grid-2" style="gap: 1.5rem;">
                <!-- Maya - Mom Persona -->
                <div class="floating-card" style="border: 2px solid var(--primary);">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.8rem;">
                        <div
                            style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--primary), var(--accent)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                            üë©</div>
                        <div>
                            <h3 style="margin: 0;">"Maya"</h3>
                            <p style="margin: 0; font-size: 0.85rem; color: #666;">28-32, Advertising/BTL, Working Mom
                            </p>
                        </div>
                    </div>
                    <ul style="font-size: 0.85rem; padding-left: 1.2rem; margin: 0;">
                        <li><strong>Role:</strong> Main household decision-maker</li>
                        <li><strong>Behaviour:</strong> Manages daily family spending (school, groceries, transport)
                        </li>
                        <li><strong>Barrier:</strong> Distrusts complicated financial tools; wants <strong>immediate
                                value</strong></li>
                        <li><strong>Insight:</strong> Seeks clear solution with <strong>control</strong> without mental
                            effort</li>
                    </ul>
                </div>

                <!-- Ziad - Gen Z Persona -->
                <div class="floating-card" style="border: 2px solid var(--accent);">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.8rem;">
                        <div
                            style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--accent), #00bcd4); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                            üë®</div>
                        <div>
                            <h3 style="margin: 0;">"Ziad"</h3>
                            <p style="margin: 0; font-size: 0.85rem; color: #666;">18-23, University Student/Fresh Grad
                            </p>
                        </div>
                    </div>
                    <ul style="font-size: 0.85rem; padding-left: 1.2rem; margin: 0;">
                        <li><strong>Role:</strong> Secondary household spender, tech-native</li>
                        <li><strong>Behaviour:</strong> Daily coffee, transport, outings; limited allowance</li>
                        <li><strong>Barrier:</strong> Dismisses "boring" traditional banking apps; wants
                            <strong>gamified rewards</strong>
                        </li>
                        <li><strong>Insight:</strong> Wants seamless payment with cashback "hacks" that justify
                            lifestyle</li>
                    </ul>
                </div>
            </div>
            <div class="citation">Sources: Euromonitor (2025); The Guardian (2025).</div>
        </div>

        <!-- Step 3 -->
        <div class="slide" data-id="3">
            <span class="step-tag">Step 3</span>
            <h2>Objectives (SMART) + AMEC Map</h2>
            <div class="grid-2">
                <div class="floating-card" style="border-left: 4px solid var(--primary);">
                    <h3>Objective 1: Reach</h3>
                    <p>Reach <strong>160,000 unique households</strong> across TikTok and Instagram, achieving at least
                        <strong>1.9% CTR</strong> within 14 days.
                    </p>
                </div>
                <div class="floating-card" style="border-left: 4px solid var(--accent);">
                    <h3>Objective 2: Conversion</h3>
                    <p>Generate at least <strong>400 application sign-ups</strong> with cashback within 14 days, with a
                        landing-page conversion rate of <strong>5%</strong>.</p>
                </div>
            </div>
            <div class="floating-card" style="margin-top: 1rem; background: var(--secondary);">
                <h3>AMEC Map</h3>
                <div class="grid-3" style="gap: 1rem;">
                    <div>
                        <p><strong>üì§ Outputs:</strong></p>
                        <p style="font-size: 0.9rem;">Social media content: posts, reels, landing page, and app tutorial
                            snippets.</p>
                    </div>
                    <div>
                        <p><strong>üí≠ Outtakes:</strong></p>
                        <p style="font-size: 0.9rem;">Awareness of advantages, shift in sentiment to <strong>70%
                                positive</strong> ("Breadfast helps me save money").</p>
                    </div>
                    <div>
                        <p><strong>üìà Outcomes:</strong></p>
                        <p style="font-size: 0.9rem;">Increase in app downloads, registrations, and engagement with app
                            features.</p>
                    </div>
                </div>
            </div>
            <div class="citation">Sources: AMEC Framework (2025).</div>
        </div>

        <!-- Step 4 -->
        <div class="slide" data-id="4">
            <span class="step-tag">Step 4</span>
            <h2>Strategy & Message House</h2>

            <div class="floating-card" style="background: var(--secondary); text-align: center; margin-bottom: 1.5rem;">
                <h3 style="margin: 0;">üí° One-Line Strategy</h3>
                <p style="font-size: 1.2rem; margin: 0.5rem 0;"><em>Highlighting tangible and instant rewards on daily
                        spending, positioning household expenses as a beneficial and rewarding experience.</em></p>
            </div>

            <div class="floating-card"
                style="border: 2px solid var(--primary); text-align: center; margin-bottom: 1.5rem;">
                <h3 style="margin: 0; color: var(--primary);">üéØ Core Message (Spine)</h3>
                <p style="font-size: 1.4rem; font-weight: bold; margin: 0.5rem 0;">"Get cashback from what you already
                    buy."</p>
            </div>

            <div class="grid-2">
                <div class="floating-card">
                    <h3>‚úÖ Proof Points</h3>
                    <ul style="padding-left: 1.2rem;">
                        <li><strong>5%-10% Cashback</strong> on spendings</li>
                        <li><strong>Instant rewards</strong> on everyday purchases</li>
                        <li>A <strong>fast, easy, and secure</strong> app for household spending</li>
                    </ul>
                </div>
                <div class="floating-card">
                    <h3>üó£Ô∏è Tone of Voice & CTA</h3>
                    <p><strong>Tone:</strong> Dependable, savvy, and simple</p>
                    <p
                        style="background: var(--primary); color: white; padding: 0.8rem 1.2rem; border-radius: 8px; text-align: center; font-weight: bold; margin-top: 0.5rem;">
                        "Sign up today and make every purchase count."
                    </p>
                </div>
            </div>
        </div>


        <!-- Step 5 -->
        <div class="slide" data-id="5">
            <span class="step-tag">Step 5</span>
            <h2>PESO Channel Mix</h2>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Channel</th>
                        <th>Role</th>
                        <th>Content Type</th>
                        <th>Cadence</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong style="color: var(--primary);">üí∞ Paid</strong></td>
                        <td>Encourage sign-ups and downloads</td>
                        <td>Instagram & TikTok ads, short videos highlighting Convenience/Ease & Rewards/Cashbacks</td>
                        <td>Non-stop</td>
                    </tr>
                    <tr>
                        <td><strong style="color: #27ae60;">üì∞ Earned</strong></td>
                        <td>Builds trust & credibility</td>
                        <td>PR to parent and lifestyle creators, application reviews</td>
                        <td>3 Rounds</td>
                    </tr>
                    <tr>
                        <td><strong style="color: #3498db;">üîó Shared</strong></td>
                        <td>Social proof & community engagement</td>
                        <td>UGC featuring testimonials or referral challenges</td>
                        <td>2-4 posts/week</td>
                    </tr>
                    <tr>
                        <td><strong style="color: #e67e22;">üè† Owned</strong></td>
                        <td>Conversion from interest to sign-ups</td>
                        <td>Landing page explaining benefits, FAQs, and cashback tutorial</td>
                        <td>Constantly Active</td>
                    </tr>
                </tbody>
            </table>
            <div class="citation">Sources: Misr Connect (2024); Cairo 360 (2024).</div>
        </div>


        <!-- Step 6 -->
        <div class="slide" data-id="6">
            <span class="step-tag">Step 6</span>
            <h2>2‚ÄëWeek Content Calendar</h2>
            <div style="overflow-x: auto;">
                <table class="data-table" style="font-size: 0.8rem;">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Channel</th>
                            <th>Hook</th>
                            <th>Asset</th>
                            <th>Owner</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="calendar-row" data-image="assets/calendar/day1.png">
                            <td><strong>Day 1</strong></td>
                            <td>Facebook / TikTok</td>
                            <td>Split screen "When you pay with cash vs with Breadfast Pay"</td>
                            <td>20s Video + captions</td>
                            <td>Content Creator #1</td>
                        </tr>
                        <tr class="calendar-row" data-image="assets/calendar/day2.png">
                            <td><strong>Day 2</strong></td>
                            <td>Instagram</td>
                            <td>"Girl Math = Coffee is free"</td>
                            <td>30s Reel</td>
                            <td>Influencer</td>
                        </tr>
                        <tr class="calendar-row" data-image="assets/calendar/day3.png">
                            <td><strong>Day 3</strong></td>
                            <td>Facebook</td>
                            <td>Financial parenting guide</td>
                            <td>60s Video</td>
                            <td>Brand</td>
                        </tr>
                        <tr class="calendar-row" data-image="assets/calendar/day5.png">
                            <td><strong>Day 5</strong></td>
                            <td>Email</td>
                            <td>"Last Chance" for 20% Off with Breadfast Pay</td>
                            <td>Countdown visual + CTA</td>
                            <td>Brand</td>
                        </tr>
                        <tr class="calendar-row" data-image="assets/calendar/day8.png">
                            <td><strong>Day 8</strong></td>
                            <td>IG Live</td>
                            <td>Q&A with Breadfast team member</td>
                            <td>"Q&A with our Breadfast Expert" promo</td>
                            <td>Team member</td>
                        </tr>
                        <tr class="calendar-row" data-image="assets/calendar/day12.png">
                            <td><strong>Day 12</strong></td>
                            <td>Instagram Stories</td>
                            <td>"Treat Yourself Tuesday" (Cashback)</td>
                            <td>Graphics + CTA (Claim Cashback)</td>
                            <td>Brand</td>
                        </tr>
                        <tr class="calendar-row" data-image="assets/calendar/day14.png">
                            <td><strong>Day 14</strong></td>
                            <td>Instagram / TikTok</td>
                            <td>"Shared Moments" / "What They're Saying"</td>
                            <td>Reposted UGC & testimonials</td>
                            <td>UGC</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="citation">Sources: Treasury.id (2024); AUC Caravan (2025).</div>
        </div>

        <!-- Step 6B: Visuals -->
        <div class="slide" data-id="7">
            <span class="step-tag">Step 6B</span>
            <h2>Visual Strategy</h2>
            <div class="grid-2">
                <div class="floating-card">
                    <h3>The Split Screen</h3>
                    <p style="font-size: 0.9rem; color: #555;">Visualizing the balance. Left: Responsible Pantry
                        Loading. Right: Indulgent Coffee Moment.</p>
                </div>
                <div class="floating-card">
                    <h3>Gen Z Aesthetic</h3>
                    <p style="font-size: 0.9rem; color: #555;">High contrast, flash photography, "Receipt" graphics
                        showing savings. "Soft Saving" vibes.</p>
                </div>
                <div class="floating-card">
                    <h3>Mom Aesthetic</h3>
                    <p style="font-size: 0.9rem; color: #555;">Warm, organized, peaceful. The app is a tool for
                        <em>control</em>.
                    </p>
                </div>
                <div class="floating-card">
                    <h3>The Red Thread</h3>
                    <p style="font-size: 0.9rem; color: #555;">The <strong>Purple Card</strong> connects both worlds.
                        It's the key to both the pantry and the caf√©.</p>
                </div>
            </div>
            <div class="citation">Sources: SceneNow (2025).</div>
        </div>

        <!-- Step 7 -->
        <div class="slide" data-id="8">
            <span class="step-tag">Step 7</span>
            <h2>Creators/Influencers Plan</h2>

            <div class="floating-card" style="background: var(--secondary); margin-bottom: 1rem;">
                <h3 style="margin: 0 0 0.5rem 0;">üìã Selection Criteria</h3>
                <p style="margin: 0;"><strong>100k-500k followers</strong> ¬∑ Everyday lifestyle & parenting focus ¬∑
                    Authentic content ¬∑ Brand safety checked</p>
            </div>

            <div class="grid-3">
                <div class="floating-card" style="text-align: center;">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQVVEesCTnogQkACmj79R7RqJn5t-6tBJjCCw&s"
                        alt="Dalia Ragheb"
                        style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; margin: 0 auto 0.5rem; border: 3px solid var(--primary);">
                    <h4 style="margin: 0;">@Daliaragheb_</h4>
                    <p style="font-size: 0.85rem; color: #666; margin: 0.3rem 0;">Lifestyle ¬∑ Parenting</p>
                </div>
                <div class="floating-card" style="text-align: center;">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ0gL2bvrpEyGOVBRQZtudX0jJNTipsDz0JSA&s"
                        alt="Sarah Hany"
                        style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; margin: 0 auto 0.5rem; border: 3px solid var(--primary);">
                    <h4 style="margin: 0;">@Sarahhanyy</h4>
                    <p style="font-size: 0.85rem; color: #666; margin: 0.3rem 0;">Mother ¬∑ Lifestyle</p>
                </div>
                <div class="floating-card" style="text-align: center;">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRHfukhnecb_uqGjvwcGW4QelTzGSIB1d3Vzw&s"
                        alt="Sarah Emad"
                        style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; margin: 0 auto 0.5rem; border: 3px solid var(--primary);">
                    <h4 style="margin: 0;">@Sarah_Emad</h4>
                    <p style="font-size: 0.85rem; color: #666; margin: 0.3rem 0;">Lifestyle ¬∑ Family</p>
                </div>
            </div>

            <div class="grid-2" style="margin-top: 1rem;">
                <div class="floating-card">
                    <h3>üìù Brief</h3>
                    <p style="font-size: 0.9rem;"><em>"Pay Fast & Earn Cashback!"</em> ‚Äî Demonstrate how Breadfast Pay
                        helps save and earn while buying groceries, coffee, or school supplies. Include clear CTA to
                        download the app.</p>
                </div>
                <div class="floating-card">
                    <h3>üì¶ Deliverables</h3>
                    <ul style="font-size: 0.9rem; padding-left: 1.2rem;">
                        <li><strong>Stories & Reels:</strong> 2-4 stories + 1 reel each</li>
                        <li><strong>TikToks:</strong> 1 high-quality video showing cashback moment</li>
                        <li><strong>Rights:</strong> Whitelisting for spark ads; 14-day usage</li>
                    </ul>
                </div>
            </div>
            <div class="citation">Sources: Misr Connect (2024); Cairo 360 (2024).</div>
        </div>

        <!-- Step 8: Landing Page Dashboard -->
        <div class="slide" data-id="lp">
            <span class="step-tag">Step 8</span>
            <h2>Landing Page / Strategic Conversion</h2>

            <div class="lp-dashboard">
                <!-- Top: Full-Width Mockup -->
                <div style="width: 100%; position: relative;">
                    <div id="lpMockupContainer"
                        style="background: #fff; border-radius: 28px; box-shadow: 0 40px 100px rgba(0,0,0,0.15); border: 1px solid #eef0f2; overflow: hidden; position: relative; width: 100%;">

                        <!-- Browser Bar -->
                        <div
                            style="background: #f8f9fa; padding: 1rem 1.5rem; display: flex; align-items: center; gap: 1.5rem; border-bottom: 1px solid #edeef0;">
                            <div style="display: flex; gap: 0.6rem;">
                                <div style="width: 14px; height: 14px; border-radius: 50%; background: #ff5f57;"></div>
                                <div style="width: 14px; height: 14px; border-radius: 50%; background: #ffbd2e;"></div>
                                <div id="lpFullscreenBtn" onclick="toggleLPFullscreen()"
                                    style="width: 14px; height: 14px; border-radius: 50%; background: #28c940; cursor: pointer;"
                                    title="Toggle Fullscreen"></div>
                            </div>
                            <div
                                style="flex: 1; background: #fff; padding: 0.5rem 1.2rem; border-radius: 12px; font-family: 'Outfit', sans-serif; font-size: 0.85rem; color: #6e7c8a; border: 1px solid #e1e4e8; display: flex; align-items: center; gap: 0.6rem;">
                                <span style="color: #27ae60;">üîí</span> breadfast.com/pay-family<span
                                    style="color: #a0aec0; font-size: 0.75rem;">?utm_source=tiktok...</span>
                            </div>
                        </div>

                        <!-- Scrollable Landing Page Content -->
                        <div id="lpScrollContent" style="height: 450px; overflow-y: auto; background: #fff;"
                            onscroll="handleLPScroll()">

                            <!-- Tracking Console Overlay -->
                            <div id="analyticsConsole" class="analytics-console">
                                <div
                                    style="display: flex; justify-content: space-between; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 4px; margin-bottom: 4px;">
                                    <span style="letter-spacing: 1px;">‚ö° GA4 LIVE</span>
                                    <span style="color: #f1c40f;">‚Ä¢</span>
                                </div>
                            </div>

                            <!-- [RESTORE] Hero Section with Video -->
                            <div id="lpHero"
                                style="position: relative; height: 350px; display: flex; align-items: center; justify-content: center; text-align: center; color: white; overflow: hidden;">
                                <video id="lpHeroVideo" autoplay loop muted playsinline
                                    style="position: absolute; top: -10%; left: 0; width: 100%; height: 120%; object-fit: cover; opacity: 0.6; will-change: transform;">
                                    <source
                                        src="https://pay.breadfast.com/wp-content/uploads/2025/10/card-video.mp4#t=0,100"
                                        type="video/mp4">
                                </video>
                                <div
                                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(180deg, rgba(26, 26, 46, 0.4) 0%, rgba(26, 26, 46, 0.8) 100%);">
                                </div>
                                <div style="position: relative; z-index: 2; padding: 2rem;">
                                    <img src="https://pay.breadfast.com/wp-content/uploads/2025/07/Breadfast-Pay-Mark-Full.png"
                                        alt="Breadfast Pay"
                                        style="height: 40px; margin-bottom: 1.5rem; filter: brightness(0) invert(1);">
                                    <h1
                                        style="font-size: 2.2rem; margin: 0 0 1rem 0; font-weight: 800; line-height: 1.1; text-shadow: 0 4px 20px rgba(0,0,0,0.5);">
                                        Your Morning Coffee.<br><span style="color: var(--accent);">Your Family's
                                            Future.</span></h1>
                                    <button onclick="logAnalyticsEvent('select_content (Hero CTA)')"
                                        style="background: white; color: var(--primary); padding: 1rem 2.5rem; border-radius: 50px; font-weight: 800; border: none; font-size: 1rem; cursor: pointer; transition: transform 0.2s; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">Get
                                        Started Free</button>
                                </div>
                            </div>

                            <!-- [NEW] Partners Bar -->
                            <div
                                style="background: #fcfcfc; padding: 2.5rem; border-bottom: 1px solid #f0f0f0; text-align: center;">
                                <p
                                    style="font-size: 0.75rem; color: #888; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 1.5rem; font-weight: 600;">
                                    Trusted by 50,000+ Egyptian Households</p>
                                <div
                                    style="display: flex; justify-content: center; gap: 4rem; opacity: 0.5; filter: grayscale(1); align-items: center;">
                                    <div
                                        style="font-weight: 900; font-size: 1rem; font-family: sans-serif; letter-spacing: 1px;">
                                        CENTRAL BANK OF EGYPT</div>
                                    <div style="font-weight: 900; font-size: 1.4rem; font-family: sans-serif;">ADIB
                                    </div>
                                    <div style="font-weight: 900; font-size: 1.4rem; font-family: sans-serif;">VISA
                                    </div>
                                </div>
                            </div>

                            <!-- [NEW] Feature Bento -->
                            <div class="feature-bento" id="lpFeatures">
                                <div class="bento-item" onmouseover="logAnalyticsEvent('view_item (Family Safety)')">
                                    <div class="bento-icon">üîí</div>
                                    <h4 style="margin: 0; font-size: 1.2rem;">Family Safeguards</h4>
                                    <p style="margin: 0; font-size: 0.9rem; color: #666; line-height: 1.5;">Set daily
                                        limits for your teens and track every piaster in real-time.</p>
                                </div>
                                <div class="bento-item" onmouseover="logAnalyticsEvent('view_item (Spend Analytics)')"
                                    style="background: #fff; border: 1px solid var(--primary);">
                                    <div class="bento-icon">üìà</div>
                                    <h4 style="margin: 0; font-size: 1.2rem; color: var(--primary);">Spend Smarter</h4>
                                    <p style="margin: 0; font-size: 0.9rem; color: #666; line-height: 1.5;">Categorized
                                        reports show you exactly where the home budget goes.</p>
                                </div>
                                <div class="bento-item" onmouseover="logAnalyticsEvent('view_item (Instant Rewards)')">
                                    <div class="bento-icon">‚ú®</div>
                                    <h4 style="margin: 0; font-size: 1.2rem;">Instant Rewards</h4>
                                    <p style="margin: 0; font-size: 0.9rem; color: #666; line-height: 1.5;">Earn
                                        cashback on every grocery bag and every morning latte.</p>
                                </div>
                                <div class="bento-item" onmouseover="logAnalyticsEvent('view_item (Digital First)')"
                                    style="background: var(--secondary); border: none;">
                                    <div class="bento-icon">üì±</div>
                                    <h4 style="margin: 0; font-size: 1.2rem; color: var(--accent);">Digital First</h4>
                                    <p style="margin: 0; font-size: 0.9rem; color: #666; line-height: 1.5;">No physical
                                        card needed. Pay with your phone, anywhere Fawry is accepted.</p>
                                </div>
                            </div>

                            <!-- [NEW] Rewards Tiers -->
                            <div id="lpRewards"
                                style="padding: 4rem 2rem; background: #fafafa; border-top: 1px solid #f0f0f0;">
                                <h3
                                    style="text-align: center; margin-bottom: 2.5rem; font-size: 1.5rem; font-weight: 800;">
                                    The More You Load, The More You Earn</h3>
                                <div class="rewards-tier">
                                    <div class="tier-card" onmouseover="logAnalyticsEvent('view_item (Bronze Tier)')">
                                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">ü•â</div>
                                        <h5 style="margin: 0; font-size: 1rem; color: #888;">Bronze</h5>
                                        <p
                                            style="font-size: 1.4rem; font-weight: 800; color: var(--primary); margin: 0.5rem 0;">
                                            2% Back</p>
                                        <p style="font-size: 0.75rem; color: #aaa; margin: 0;">Up to 500 EGP Load</p>
                                    </div>
                                    <div class="tier-card active"
                                        onmouseover="logAnalyticsEvent('view_item (Silver Tier)')">
                                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">ü•à</div>
                                        <h5 style="margin: 0; font-size: 1.1rem; color: var(--primary);">Silver</h5>
                                        <p
                                            style="font-size: 1.6rem; font-weight: 800; color: var(--primary); margin: 0.5rem 0;">
                                            5% Back</p>
                                        <span
                                            style="font-size: 0.65rem; background: #27ae60; color: white; padding: 2px 8px; border-radius: 10px; font-weight: bold;">MOST
                                            POPULAR</span>
                                    </div>
                                    <div class="tier-card" onmouseover="logAnalyticsEvent('view_item (Gold Tier)')">
                                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">ü•á</div>
                                        <h5 style="margin: 0; font-size: 1rem; color: #888;">Gold</h5>
                                        <p
                                            style="font-size: 1.4rem; font-weight: 800; color: var(--primary); margin: 0.5rem 0;">
                                            10% Back</p>
                                        <p style="font-size: 0.75rem; color: #aaa; margin: 0;">Loaded 2000+ EGP</p>
                                    </div>
                                </div>
                            </div>

                            <!-- [NEW] How It Works 1-2-3 -->
                            <div style="padding: 5rem 2rem; text-align: center; background: white;">
                                <h3 style="font-size: 1.6rem; margin-bottom: 4rem; font-weight: 800;">Ready in 3 Simple
                                    Steps</h3>
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 3rem;">
                                    <div>
                                        <div
                                            style="width: 50px; height: 50px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 2rem; font-weight: bold; font-size: 1.2rem; box-shadow: 0 10px 20px rgba(181, 23, 158, 0.2);">
                                            1</div>
                                        <h5 style="margin: 0 0 0.8rem 0; font-size: 1.1rem;">Download</h5>
                                        <p style="font-size: 0.85rem; color: #888; line-height: 1.6;">Install the
                                            Breadfast App on iOS or Android and create your account.</p>
                                    </div>
                                    <div>
                                        <div
                                            style="width: 50px; height: 50px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 2rem; font-weight: bold; font-size: 1.2rem; box-shadow: 0 10px 20px rgba(181, 23, 158, 0.2);">
                                            2</div>
                                        <h5 style="margin: 0 0 0.8rem 0; font-size: 1.1rem;">Link Family</h5>
                                        <p style="font-size: 0.85rem; color: #888; line-height: 1.6;">Invite family
                                            members and set individual spending allowances.</p>
                                    </div>
                                    <div>
                                        <div
                                            style="width: 50px; height: 50px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 2rem; font-weight: bold; font-size: 1.2rem; box-shadow: 0 10px 20px rgba(181, 23, 158, 0.2);">
                                            3</div>
                                        <h5 style="margin: 0 0 0.8rem 0; font-size: 1.1rem;">Spend & Earn</h5>
                                        <p style="font-size: 0.85rem; color: #888; line-height: 1.6;">Every purchase
                                            adds instant cashback to your family wallet balance.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- [NEW] Redesigned Footer -->
                            <div
                                style="background: #111122; color: white; padding: 5rem 2rem; text-align: center; border-top: 4px solid var(--accent);">
                                <h3 style="font-size: 1.8rem; margin-bottom: 1.5rem; font-weight: 800;">Join the Future
                                    of Family Finance</h3>
                                <p
                                    style="font-size: 1rem; opacity: 0.7; margin-bottom: 3rem; max-width: 500px; margin-left: auto; margin-right: auto;">
                                    Start saving more on your daily essentials today. No credit check required.</p>
                                <button onclick="logAnalyticsEvent('generate_lead (Final conversion)')"
                                    style="background: var(--accent); color: white; padding: 1.2rem 4rem; border: none; border-radius: 50px; font-weight: bold; font-size: 1.2rem; cursor: pointer; margin-bottom: 3rem; box-shadow: 0 15px 40px rgba(181, 23, 158, 0.4); transition: transform 0.2s;">Create
                                    Family Wallet Now</button>
                                <div
                                    style="display: flex; justify-content: center; gap: 3rem; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 3rem; font-size: 0.8rem; opacity: 0.5; font-weight: 500;">
                                    <span>Privacy Policy</span>
                                    <span>Terms of Service</span>
                                    <span>Security</span>
                                    <span>Contact Us</span>
                                </div>
                                <p style="margin-top: 3rem; font-size: 0.75rem; opacity: 0.3; font-family: monospace;">¬©
                                    2025 Breadfast Pay. Licensed by the Central Bank of Egypt. All rights reserved.</p>
                                <div
                                    style="margin-top: 2rem; display: flex; justify-content: center; gap: 1rem; filter: grayscale(1) invert(1); opacity: 0.3;">
                                    <div style="font-size: 1.5rem;">ùïè</div>
                                    <div style="font-size: 1.5rem;">üì∏</div>
                                    <div style="font-size: 1.5rem;">üé•</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bottom: Strategy Row -->
                <div class="lp-sidebar" style="margin-top: 2rem;">
                    <!-- Card 1: Conversion -->
                    <div class="floating-card"
                        style="background: linear-gradient(135deg, var(--primary), #8e1c6d); color: white; border: none; margin-bottom: 0;">
                        <h4 style="margin: 0 0 0.5rem 0; color: white; font-size: 0.95rem;">üéØ Conversion Core</h4>
                        <p style="font-size: 0.75rem; opacity: 0.9; line-height: 1.3; margin-bottom: 0.8rem;">
                            Bridging trust and convenience in a single high-funnel experience.</p>
                        <button onclick="openFlowModal()"
                            style="width: 100%; padding: 0.6rem; background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.75rem;">View
                            Flow ‚ûú</button>
                    </div>

                    <!-- Card 2: Events -->
                    <div class="floating-card" style="margin-bottom: 0;">
                        <h4 style="margin: 0 0 0.5rem 0; color: var(--primary); font-size: 0.95rem;">üìä LIVE Pings
                        </h4>
                        <div
                            style="font-size: 0.7rem; color: #666; display: grid; grid-template-columns: 1fr 1fr; gap: 0.4rem;">
                            <div style="display: flex; gap: 4px; align-items: center;"><span>‚Ä¢ Hero</span> <span
                                    style="color: #27ae60;">OK</span></div>
                            <div style="display: flex; gap: 4px; align-items: center;"><span>‚Ä¢ Bento</span> <span
                                    style="color: #27ae60;">OK</span></div>
                            <div style="display: flex; gap: 4px; align-items: center;"><span>‚Ä¢ Tiers</span> <span
                                    style="color: #27ae60;">OK</span></div>
                            <div style="display: flex; gap: 4px; align-items: center;"><span>‚Ä¢ Lead</span> <span
                                    style="color: #27ae60;">OK</span></div>
                        </div>
                    </div>

                    <!-- Card 3: UTM Context -->
                    <div class="floating-card" style="margin-bottom: 0;">
                        <h4 style="margin: 0 0 0.5rem 0; font-size: 0.95rem;">üîó UTM Context</h4>
                        <div
                            style="font-size: 0.65rem; font-family: monospace; background: #fcfcfc; padding: 0.5rem; border-radius: 6px; border: 1px solid #eee;">
                            src: <span style="color: var(--primary);">tiktok</span> | med: <span
                                style="color: var(--primary);">infl</span><br>
                            cmp: <span style="color: var(--primary);">family_wallet</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="citation" style="margin-top: 2rem;">Sources: SceneNow (2025); Egypt Fintech Report (2025).
            </div>
        </div>

        <script>
            let lpIsFullscreen = false;
            let loggedEvents = new Set();

            function toggleLPFullscreen() {
                const container = document.getElementById('lpMockupContainer');
                const scrollContent = document.getElementById('lpScrollContent');
                const btn = document.getElementById('lpFullscreenBtn');

                lpIsFullscreen = !lpIsFullscreen;

                if (lpIsFullscreen) {
                    container.classList.add('lp-mockup-fullscreen');
                    btn.title = 'Exit Fullscreen';
                } else {
                    container.classList.remove('lp-mockup-fullscreen');
                    btn.title = 'Toggle Fullscreen';
                }
            }

            function openFlowModal() {
                document.getElementById('flowModal').classList.add('active');
            }

            function closeFlowModal() {
                document.getElementById('flowModal').classList.remove('active');
            }

            function logAnalyticsEvent(event) {
                const console = document.getElementById('analyticsConsole');
                const ping = document.createElement('div');
                ping.className = 'ping';
                ping.innerHTML = `<span>[${new Date().toLocaleTimeString([], { hour12: false })}]</span> ${event}`;
                console.appendChild(ping);

                // Keep only last 5 pings
                if (console.children.length > 6) {
                    console.removeChild(console.children[1]);
                }
            }

            function handleLPScroll() {
                const scroll = document.getElementById('lpScrollContent');
                const scrollTop = scroll.scrollTop;
                const heroVideo = document.getElementById('lpHeroVideo');

                // Parallax Effect
                if (heroVideo && scrollTop < 600) {
                    heroVideo.style.transform = `translateY(${scrollTop * 0.2}px)`;
                }

                // Hero (at top)
                if (scrollTop > 50 && !loggedEvents.has('view_item (Hero)')) {
                    logAnalyticsEvent('view_item (Hero Explored)');
                    loggedEvents.add('view_item (Hero)');
                }
                // Features Bento (around 300px)
                if (scrollTop > 300 && !loggedEvents.has('view_item (Features)')) {
                    logAnalyticsEvent('view_item (Value Bento Scrolled)');
                    loggedEvents.add('view_item (Features)');
                }
                // Rewards Tiers (around 700px)
                if (scrollTop > 700 && !loggedEvents.has('view_item (Rewards)')) {
                    logAnalyticsEvent('view_item (Reward Tiers Scanned)');
                    loggedEvents.add('view_item (Rewards)');
                }
                // Footer / CTA (around 1200px)
                if (scrollTop > 1200 && !loggedEvents.has('view_item (Footer)')) {
                    logAnalyticsEvent('view_item (Conversion Zone)');
                    loggedEvents.add('view_item (Footer)');
                }
            }

            // ESC key to exit fullscreen
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape') {
                    if (lpIsFullscreen) toggleLPFullscreen();
                    if (document.getElementById('flowModal').classList.contains('active')) closeFlowModal();
                }
            });
        </script>


        <!-- Step 9 -->
        <div class="slide" data-id="9">
            <span class="step-tag">Step 9</span>
            <h2>Community Management & Issues</h2>
            <div class="grid-2">
                <div class="floating-card" style="background: var(--secondary);">
                    <h3>üéØ Goal</h3>
                    <p>Reply and interact with the audience quickly, handle client questions and concerns.</p>
                    <p><strong>Response Window:</strong> Reply within <strong>1 hour</strong>, from 10 AM to 10 PM
                        (Cairo time).</p>
                </div>
                <div class="floating-card">
                    <h3>‚ùì FAQ / Common Questions</h3>
                    <ul style="padding-left: 1.2rem; font-size: 0.9rem;">
                        <li>How to register for Breadfast Pay?</li>
                        <li>How to use it for groceries/orders?</li>
                        <li>Cashback and Offers</li>
                        <li>Transaction errors and payment failures</li>
                        <li>Refunds and order issues</li>
                    </ul>
                </div>
            </div>
            <div class="grid-2" style="margin-top: 1rem;">
                <div class="floating-card" style="border-left: 5px solid red;">
                    <h3>üö® Escalation Guidelines</h3>
                    <ul style="padding-left: 1.2rem; font-size: 0.85rem;">
                        <li><strong>Payment Failures</strong> (double charge, failed payment): Resort to support
                            centre
                            within 1 hour.</li>
                        <li><strong>Misinformation / User Confusion:</strong> Reply with correction; contact
                            marketing
                            if complaints are high.</li>
                        <li><strong>Security Concerns:</strong> Contact security team <em>immediately</em>.</li>
                    </ul>
                </div>
                <div class="floating-card">
                    <h3>üëÇ Listening Keywords</h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; font-size: 0.8rem;">
                        <span
                            style="background: #ffe4fa; color: #b2288e; padding: 4px 8px; border-radius: 4px;">"Breadfast
                            Pay issue"</span>
                        <span
                            style="background: #ffe4fa; color: #b2288e; padding: 4px 8px; border-radius: 4px;">Breadfast
                            / Breadfast Pay / Breadfast App</span>
                        <span
                            style="background: #fff9c4; color: #e67e22; padding: 4px 8px; border-radius: 4px;">"Cashback
                            missing"</span>
                        <span
                            style="background: #fff9c4; color: #e67e22; padding: 4px 8px; border-radius: 4px;">"Payment
                            error"</span>
                        <span
                            style="background: #ffebee; color: #c0392b; padding: 4px 8px; border-radius: 4px;">"unauthorized
                            payment"</span>
                        <span
                            style="background: #ffebee; color: #c0392b; padding: 4px 8px; border-radius: 4px;">"account
                            blocked"</span>
                    </div>
                </div>
            </div>
            <div class="citation">Sources: Brand Guidelines (2025).</div>
        </div>

        <!-- Step 10 -->
        <div class="slide" data-id="10">
            <span class="step-tag">Step 10</span>
            <h2>Measurement Plan</h2>
            <div class="grid-2">
                <div class="floating-card">
                    <h3>Family KPIs (Funnel)</h3>
                    <!-- CSS Funnel -->
                    <style>
                        .funnel-container {
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            margin: 1rem 0;
                        }

                        .funnel-step {
                            color: #fff;
                            text-align: center;
                            padding: 8px;
                            position: relative;
                            margin-bottom: 2px;
                            font-size: 0.9rem;
                            font-weight: bold;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            flex-direction: column;
                        }

                        .f-top {
                            width: 90%;
                            background: #b2288e;
                            clip-path: polygon(0 0, 100% 0, 90% 100%, 10%);
                        }

                        .f-mid {
                            width: 70%;
                            background: #c65aa8;
                            clip-path: polygon(0 0, 100% 0, 85% 100%, 15%);
                        }

                        .f-bot {
                            width: 50%;
                            background: #d98cc2;
                            clip-path: polygon(0 0, 100% 0, 80% 100%, 20%);
                        }

                        .f-metric {
                            font-size: 0.75rem;
                            opacity: 0.9;
                            font-weight: normal;
                        }
                    </style>
                    <div class="funnel-container">
                        <div class="funnel-step f-top">
                            Reach
                            <span class="f-metric">1.5M Households</span>
                        </div>
                        <div class="funnel-step f-mid">
                            Adoption
                            <span class="f-metric">20,000 Accounts</span>
                        </div>
                        <div class="funnel-step f-bot">
                            Volume
                            <span class="f-metric">EGP 10M Wallet Load</span>
                        </div>
                    </div>
                </div>
                <div class="floating-card">
                    <h3>AMEC Outcomes</h3>
                    <p><strong>Behavior Change:</strong> Mom shifts grocery budget to Breadfast for rewards. <br>Gen
                        Z
                        shifts coffee spend for cashback.</p>
                </div>
            </div>
            <div class="citation">Sources: Bethel University (2014).</div>
        </div>

        <!-- Step 11 -->
        <div class="slide" data-id="11">
            <span class="step-tag">Step 11</span>
            <h2>Budget & Timeline</h2>

            <div class="floating-card"
                style="background: linear-gradient(135deg, var(--primary), #8e1c6d); text-align: center; margin-bottom: 1rem; color: white;">
                <h3 style="margin: 0; font-size: 2rem; color: white;">üí∞ Total Budget: <span
                        style="background: #FDCB6E; color: #2d3436; padding: 0.2rem 0.8rem; border-radius: 8px; font-size: 2.2rem;">EGP
                        200,000</span></h3>
                <p style="margin: 0.5rem 0 0 0; opacity: 0.9; color: white;">14-Day Launch Sprint Campaign</p>
            </div>

            <!-- Toggle Button -->
            <div style="text-align: center; margin-bottom: 1rem;">
                <button id="budgetToggle" onclick="toggleBudgetView()"
                    style="background: #fff; color: var(--primary); border: 2px solid var(--primary); padding: 0.5rem 1.5rem; border-radius: 50px; cursor: pointer; font-weight: bold; transition: all 0.3s;">
                    üìä Switch to Graph View
                </button>
            </div>

            <!-- Table View -->
            <div id="budgetTable" style="transition: opacity 0.4s, transform 0.4s;">
                <table class="data-table"
                    style="background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
                    <thead style="background: var(--primary); color: white;">
                        <tr>
                            <th style="color: white;">Item / Channel</th>
                            <th style="color: white;">Budget (EGP)</th>
                            <th style="color: white;">Role / Notes</th>
                            <th style="color: white;">Timing</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>üí∞ Paid Media (IG/TikTok)</strong></td>
                            <td><strong style="color: var(--primary);">110,000</strong></td>
                            <td>Reach 160k households and promote creator posts (Spark Ads)</td>
                            <td>Days 1‚Äì14</td>
                        </tr>
                        <tr style="background: #fafafa;">
                            <td><strong>üé¨ Creators (3 Macro)</strong></td>
                            <td><strong style="color: var(--primary);">60,000</strong></td>
                            <td>1 Reel + 3 Stories each; includes usage rights and whitelisting</td>
                            <td>Days 1‚Äì10</td>
                        </tr>
                        <tr>
                            <td><strong>üéÅ Giveaways/Incentives</strong></td>
                            <td><strong style="color: var(--primary);">20,000</strong></td>
                            <td>Cashback subsidies and prizes to drive app adoption/UGC</td>
                            <td>Days 7‚Äì14</td>
                        </tr>
                        <tr style="background: #fafafa;">
                            <td><strong>üé® Design/Production</strong></td>
                            <td><strong style="color: var(--primary);">10,000</strong></td>
                            <td>Landing page assets, creative props, and editing</td>
                            <td>Pre-launch</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Graph View (Hidden by default) -->
            <div id="budgetGraph"
                style="display: none; opacity: 0; transform: translateY(20px); transition: opacity 0.4s, transform 0.4s;">
                <div class="grid-2" style="gap: 2rem;">
                    <!-- Bar Chart -->
                    <div class="floating-card" style="padding: 1.5rem;">
                        <h3 style="margin: 0 0 1rem 0; text-align: center;">Budget Allocation</h3>
                        <div id="barChartContainer">
                            <div class="budget-bar-item" style="margin-bottom: 1.2rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                                    <span>üí∞ Paid Media</span>
                                    <strong style="color: var(--primary);">EGP 110,000</strong>
                                </div>
                                <div style="background: #eee; border-radius: 10px; height: 24px; overflow: hidden;">
                                    <div class="bar-animate"
                                        style="height: 100%; background: linear-gradient(90deg, var(--primary), #d65baf); border-radius: 10px; width: 0;"
                                        data-width="55%"></div>
                                </div>
                            </div>
                            <div class="budget-bar-item" style="margin-bottom: 1.2rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                                    <span>üé¨ Creators</span>
                                    <strong style="color: #FDCB6E;">EGP 60,000</strong>
                                </div>
                                <div style="background: #eee; border-radius: 10px; height: 24px; overflow: hidden;">
                                    <div class="bar-animate"
                                        style="height: 100%; background: linear-gradient(90deg, #FDCB6E, #f0a500); border-radius: 10px; width: 0;"
                                        data-width="30%"></div>
                                </div>
                            </div>
                            <div class="budget-bar-item" style="margin-bottom: 1.2rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                                    <span>üéÅ Giveaways</span>
                                    <strong style="color: #27ae60;">EGP 20,000</strong>
                                </div>
                                <div style="background: #eee; border-radius: 10px; height: 24px; overflow: hidden;">
                                    <div class="bar-animate"
                                        style="height: 100%; background: linear-gradient(90deg, #27ae60, #2ecc71); border-radius: 10px; width: 0;"
                                        data-width="10%"></div>
                                </div>
                            </div>
                            <div class="budget-bar-item">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                                    <span>üé® Design</span>
                                    <strong style="color: #3498db;">EGP 10,000</strong>
                                </div>
                                <div style="background: #eee; border-radius: 10px; height: 24px; overflow: hidden;">
                                    <div class="bar-animate"
                                        style="height: 100%; background: linear-gradient(90deg, #3498db, #2980b9); border-radius: 10px; width: 0;"
                                        data-width="5%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Donut Chart -->
                    <div class="floating-card" style="padding: 1.5rem; text-align: center;">
                        <h3 style="margin: 0 0 1rem 0;">Percentage Split</h3>
                        <div style="position: relative; width: 180px; height: 180px; margin: 0 auto;">
                            <svg viewBox="0 0 36 36" style="width: 100%; height: 100%; transform: rotate(-90deg);">
                                <!-- Background circle -->
                                <circle cx="18" cy="18" r="15.915" fill="none" stroke="#eee" stroke-width="3">
                                </circle>
                                <!-- Paid Media 55% -->
                                <circle class="donut-segment" cx="18" cy="18" r="15.915" fill="none"
                                    stroke="var(--primary)" stroke-width="3" stroke-dasharray="0 100" data-target="55"
                                    stroke-linecap="round"></circle>
                                <!-- Creators 30% -->
                                <circle class="donut-segment" cx="18" cy="18" r="15.915" fill="none" stroke="#FDCB6E"
                                    stroke-width="3" stroke-dasharray="0 100" stroke-dashoffset="-55" data-target="30"
                                    stroke-linecap="round"></circle>
                                <!-- Giveaways 10% -->
                                <circle class="donut-segment" cx="18" cy="18" r="15.915" fill="none" stroke="#27ae60"
                                    stroke-width="3" stroke-dasharray="0 100" stroke-dashoffset="-85" data-target="10"
                                    stroke-linecap="round"></circle>
                                <!-- Design 5% -->
                                <circle class="donut-segment" cx="18" cy="18" r="15.915" fill="none" stroke="#3498db"
                                    stroke-width="3" stroke-dasharray="0 100" stroke-dashoffset="-95" data-target="5"
                                    stroke-linecap="round"></circle>
                            </svg>
                            <div
                                style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">EGP</div>
                                <div style="font-size: 0.9rem; color: #666;">200K</div>
                            </div>
                        </div>
                        <div
                            style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.8rem; margin-top: 1rem; font-size: 0.8rem;">
                            <span><span
                                    style="display: inline-block; width: 12px; height: 12px; background: var(--primary); border-radius: 50%; margin-right: 4px;"></span>Paid
                                55%</span>
                            <span><span
                                    style="display: inline-block; width: 12px; height: 12px; background: #FDCB6E; border-radius: 50%; margin-right: 4px;"></span>Creators
                                30%</span>
                            <span><span
                                    style="display: inline-block; width: 12px; height: 12px; background: #27ae60; border-radius: 50%; margin-right: 4px;"></span>Giveaways
                                10%</span>
                            <span><span
                                    style="display: inline-block; width: 12px; height: 12px; background: #3498db; border-radius: 50%; margin-right: 4px;"></span>Design
                                5%</span>
                        </div>
                    </div>
                </div>

                <!-- Premiere Pro-Style Timeline -->
                <div class="floating-card" style="padding: 1.5rem; margin-top: 1.5rem; background: #1a1a2e;">
                    <h3 style="margin: 0 0 1rem 0; text-align: center; color: #fff;">üìÖ Campaign Timeline</h3>

                    <!-- Timeline Header with Day Markers -->
                    <div style="display: flex; margin-bottom: 0.5rem; padding-left: 120px;">
                        <div
                            style="display: flex; width: 100%; justify-content: space-between; font-size: 0.7rem; color: #888;">
                            <span>Pre</span>
                            <span>Day 1</span>
                            <span>Day 5</span>
                            <span>Day 7</span>
                            <span>Day 10</span>
                            <span>Day 14</span>
                        </div>
                    </div>

                    <!-- Timeline Ruler -->
                    <div style="display: flex; align-items: center; margin-bottom: 0.8rem; padding-left: 120px;">
                        <div
                            style="flex: 1; height: 2px; background: linear-gradient(90deg, #444, #666); position: relative;">
                            <div
                                style="position: absolute; left: 0; top: -4px; width: 10px; height: 10px; background: #00bcd4; border-radius: 50%;">
                            </div>
                            <div
                                style="position: absolute; left: 7%; top: -3px; width: 6px; height: 6px; background: #666; border-radius: 50%;">
                            </div>
                            <div
                                style="position: absolute; left: 35%; top: -3px; width: 6px; height: 6px; background: #666; border-radius: 50%;">
                            </div>
                            <div
                                style="position: absolute; left: 50%; top: -3px; width: 6px; height: 6px; background: #666; border-radius: 50%;">
                            </div>
                            <div
                                style="position: absolute; left: 71%; top: -3px; width: 6px; height: 6px; background: #666; border-radius: 50%;">
                            </div>
                            <div
                                style="position: absolute; right: 0; top: -4px; width: 10px; height: 10px; background: #e74c3c; border-radius: 50%;">
                            </div>
                        </div>
                    </div>

                    <!-- Timeline Tracks -->
                    <div style="display: flex; flex-direction: column; gap: 0.6rem;">
                        <!-- Track 1: Design/Production -->
                        <div style="display: flex; align-items: center;">
                            <div
                                style="width: 120px; font-size: 0.75rem; color: #aaa; padding-right: 10px; text-align: right;">
                                üé® Design</div>
                            <div
                                style="flex: 1; height: 24px; background: #2d2d44; border-radius: 4px; position: relative; overflow: hidden;">
                                <div class="timeline-track"
                                    style="position: absolute; left: 0; top: 3px; bottom: 3px; width: 0; background: linear-gradient(90deg, #3498db, #2980b9); border-radius: 3px; box-shadow: 0 0 8px rgba(52, 152, 219, 0.5);"
                                    data-width="7%" data-delay="0"></div>
                            </div>
                        </div>
                        <!-- Track 2: Paid Media -->
                        <div style="display: flex; align-items: center;">
                            <div
                                style="width: 120px; font-size: 0.75rem; color: #aaa; padding-right: 10px; text-align: right;">
                                üí∞ Paid Media</div>
                            <div
                                style="flex: 1; height: 24px; background: #2d2d44; border-radius: 4px; position: relative; overflow: hidden;">
                                <div class="timeline-track"
                                    style="position: absolute; left: 7%; top: 3px; bottom: 3px; width: 0; background: linear-gradient(90deg, var(--primary), #d65baf); border-radius: 3px; box-shadow: 0 0 8px rgba(178, 40, 142, 0.5);"
                                    data-width="93%" data-delay="100"></div>
                            </div>
                        </div>
                        <!-- Track 3: Creators -->
                        <div style="display: flex; align-items: center;">
                            <div
                                style="width: 120px; font-size: 0.75rem; color: #aaa; padding-right: 10px; text-align: right;">
                                üé¨ Creators</div>
                            <div
                                style="flex: 1; height: 24px; background: #2d2d44; border-radius: 4px; position: relative; overflow: hidden;">
                                <div class="timeline-track"
                                    style="position: absolute; left: 7%; top: 3px; bottom: 3px; width: 0; background: linear-gradient(90deg, #FDCB6E, #f0a500); border-radius: 3px; box-shadow: 0 0 8px rgba(253, 203, 110, 0.5);"
                                    data-width="64%" data-delay="200"></div>
                            </div>
                        </div>
                        <!-- Track 4: Giveaways -->
                        <div style="display: flex; align-items: center;">
                            <div
                                style="width: 120px; font-size: 0.75rem; color: #aaa; padding-right: 10px; text-align: right;">
                                üéÅ Giveaways</div>
                            <div
                                style="flex: 1; height: 24px; background: #2d2d44; border-radius: 4px; position: relative; overflow: hidden;">
                                <div class="timeline-track"
                                    style="position: absolute; left: 50%; top: 3px; bottom: 3px; width: 0; background: linear-gradient(90deg, #27ae60, #2ecc71); border-radius: 3px; box-shadow: 0 0 8px rgba(39, 174, 96, 0.5);"
                                    data-width="50%" data-delay="300"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Playhead (animated) -->
                    <div style="display: flex; align-items: center; margin-top: 0.8rem; padding-left: 120px;">
                        <div style="flex: 1; position: relative; height: 20px;">
                            <div id="playhead"
                                style="position: absolute; left: 0; top: 0; width: 2px; height: 100%; background: #00bcd4; box-shadow: 0 0 10px #00bcd4; opacity: 0; transition: left 3s linear, opacity 0.3s;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="citation">Sources: AMEC (2025).</div>
        </div>

        <script>
            let budgetViewIsGraph = false;

            function toggleBudgetView() {
                const table = document.getElementById('budgetTable');
                const graph = document.getElementById('budgetGraph');
                const btn = document.getElementById('budgetToggle');

                budgetViewIsGraph = !budgetViewIsGraph;

                if (budgetViewIsGraph) {
                    // Switch to graph
                    table.style.opacity = '0';
                    table.style.transform = 'translateY(-20px)';
                    setTimeout(() => {
                        table.style.display = 'none';
                        graph.style.display = 'block';
                        setTimeout(() => {
                            graph.style.opacity = '1';
                            graph.style.transform = 'translateY(0)';
                            animateBars();
                            animateDonut();
                            animateTimeline();
                        }, 50);
                    }, 300);
                    btn.innerHTML = 'üìã Switch to Table View';
                    btn.style.background = 'var(--primary)';
                    btn.style.color = 'white';
                } else {
                    // Switch to table
                    graph.style.opacity = '0';
                    graph.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        graph.style.display = 'none';
                        table.style.display = 'block';
                        setTimeout(() => {
                            table.style.opacity = '1';
                            table.style.transform = 'translateY(0)';
                        }, 50);
                    }, 300);
                    btn.innerHTML = 'üìä Switch to Graph View';
                    btn.style.background = '#fff';
                    btn.style.color = 'var(--primary)';
                }
            }

            function animateBars() {
                const bars = document.querySelectorAll('.bar-animate');
                bars.forEach((bar, index) => {
                    bar.style.width = '0';
                    setTimeout(() => {
                        bar.style.transition = 'width 1s cubic-bezier(0.4, 0, 0.2, 1)';
                        bar.style.width = bar.dataset.width;
                    }, index * 150);
                });
            }

            function animateDonut() {
                const segments = document.querySelectorAll('.donut-segment');
                segments.forEach((seg, index) => {
                    const target = parseFloat(seg.dataset.target);
                    seg.style.strokeDasharray = '0 100';
                    setTimeout(() => {
                        seg.style.transition = 'stroke-dasharray 1.2s cubic-bezier(0.4, 0, 0.2, 1)';
                        seg.style.strokeDasharray = `${target} ${100 - target}`;
                    }, index * 200);
                });
            }

            function animateTimeline() {
                const tracks = document.querySelectorAll('.timeline-track');
                tracks.forEach((track) => {
                    track.style.width = '0';
                    const delay = parseInt(track.dataset.delay) || 0;
                    setTimeout(() => {
                        track.style.transition = 'width 1.2s cubic-bezier(0.4, 0, 0.2, 1)';
                        track.style.width = track.dataset.width;
                    }, delay + 300);
                });

                // Animate playhead
                const playhead = document.getElementById('playhead');
                if (playhead) {
                    playhead.style.left = '0';
                    playhead.style.opacity = '0';
                    setTimeout(() => {
                        playhead.style.opacity = '1';
                        playhead.style.left = '100%';
                    }, 800);
                }
            }
        </script>

        <!-- Step 12 -->
        <div class="slide" data-id="12">
            <span class="step-tag">Step 12</span>
            <h2>Risks, Ethics & AI Use</h2>
            <div class="grid-2">
                <div>
                    <div class="floating-card" style="border-left: 5px solid red;">
                        <h3>‚ö†Ô∏è Disclosure</h3>
                        <p>Any <strong>paid influencer</strong> must include <strong>#ad</strong> in content or
                            clearly
                            announce sponsorship.</p>
                    </div>
                    <div class="floating-card" style="border-left: 5px solid var(--accent);">
                        <h3>üîí Privacy & Consent</h3>
                        <p>Before reposting UGC content, <strong>permission from users</strong> must be acquired.
                        </p>
                    </div>
                </div>
                <div>
                    <div class="floating-card" style="border-left: 5px solid #3498db;">
                        <h3>‚úÖ Inclusive & Accurate Content</h3>
                        <p>All content must include <strong>inclusive language and visuals</strong>. Messages must
                            be
                            accurate regarding cashback percentages and benefits.</p>
                    </div>
                    <div class="floating-card" style="border-left: 5px solid var(--primary);">
                        <h3>ü§ñ AI Use</h3>
                        <p>Any AI-generated content must be <strong>revised by a human</strong>. Facts must be
                            re-checked. Posts must disclose AI usage for authenticity.</p>
                    </div>
                </div>
            </div>
            <div class="floating-card" style="background: var(--secondary); margin-top: 1rem;">
                <h3>üõ°Ô∏è Mitigations</h3>
                <p style="margin: 0;"><strong>FAQs</strong> provided for common questions ¬∑ <strong>Crisis
                        management</strong> including refunds and support centers for complaints.</p>
            </div>
            <div class="citation">Sources: Shehata & Partners (n.d.); CBE (2023).</div>
        </div>

        <!-- Extra Summary Slide (Hidden) -->
        <div class="slide" data-id="summary-extra">
            <span class="step-tag">Bonus</span>
            <h2>Appendix: Ecosystem & Media</h2>
            <div class="grid-2">
                <div class="floating-card">
                    <h3>Product Ecosystem</h3>
                    <ul style="font-size: 0.9rem; padding-left: 1.2rem;">
                        <li><strong>Student Card:</strong> Parental control for moms, independence for Gen Z.</li>
                        <li><strong>Adulting Coach:</strong> Data-driven financial insights & coffee habits
                            tracking.
                        </li>
                    </ul>
                </div>
                <div class="floating-card">
                    <h3>Earned Media Strategy</h3>
                    <ul style="font-size: 0.9rem; padding-left: 1.2rem;">
                        <li><strong>The Tech Hook:</strong> Breadfast as the Fintech Super-App puzzle piece.</li>
                        <li><strong>The Consumer Hook:</strong> Repositioning as an "Inflation Shield" saving
                            familias
                            EGP 500/month.</li>
                    </ul>
                </div>
            </div>
            <div class="floating-card" style="margin-top: 1rem; background: var(--secondary);">
                <p style="margin: 0; font-size: 0.95rem;"><em>"Breadfast Launches 'Family Wallet' to Combat
                        Inflation:
                        One App, Two Lifestyles."</em></p>
            </div>
        </div>

    </div>

    <!-- Preview Modal -->
    <div id="imageModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-close" onclick="closeModal()">√ó</div>
            <div class="modal-arrow left" onclick="prevPost()">‚Üê</div>
            <div class="modal-arrow right" onclick="nextPost()">‚Üí</div>
            <img id="modalImg" class="modal-image" src="" alt="Post Preview">
            <div class="modal-info">
                <h4 id="modalDay">Day 1</h4>
                <p id="modalDetails">Channel: Facebook | Hook: Text</p>
            </div>
        </div>
    </div>

    <!-- Conversion Flow Modal -->
    <div id="flowModal" class="modal-overlay">
        <div class="modal-content flow-modal">
            <div class="modal-close" onclick="closeFlowModal()">√ó</div>
            <div style="padding: 20px;">
                <h2 style="color: var(--primary); margin-top: 0; text-align: center;">Conversion Path</h2>
                <div class="flow-step">
                    <div class="flow-num">1</div>
                    <div>
                        <strong>Hero Section</strong>
                        <p style="margin: 0; font-size: 0.85rem; color: #666;">Hook: "Fuel Your Home & Your Day"</p>
                    </div>
                </div>
                <div class="flow-step">
                    <div class="flow-num">2</div>
                    <div>
                        <strong>Social Proof</strong>
                        <p style="margin: 0; font-size: 0.85rem; color: #666;">Validation from key influencers</p>
                    </div>
                </div>
                <div class="flow-step">
                    <div class="flow-num">3</div>
                    <div>
                        <strong>Value Routine</strong>
                        <p style="margin: 0; font-size: 0.85rem; color: #666;">Mom Loads ‚Üí Teen Spends ‚Üí Both Earn
                        </p>
                    </div>
                </div>
                <div class="flow-step">
                    <div class="flow-num">4</div>
                    <div>
                        <strong>Conversion CTA</strong>
                        <p style="margin: 0; font-size: 0.85rem; color: #666;">App Store download / Lead gen</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- UI Overlay -->
    <div class="progress">Slide <span id="current">0</span> / <span id="total">0</span></div>
    <div class="controls">
        <button id="prevBtn">‚Üê</button>
        <button id="nextBtn">‚Üí</button>
    </div>

    <script>
        const calendarData = [
            { day: "Day 1", channel: "Facebook / TikTok", hook: "Split screen 'Cash vs Breadfast Pay'", asset: "20s Video + captions", image: "assets/calendar/day1.png" },
            { day: "Day 2", channel: "Instagram", hook: "'Girl Math = Coffee is free'", asset: "30s Reel", image: "assets/calendar/day2.png" },
            { day: "Day 3", channel: "Facebook", hook: "Financial parenting guide", asset: "60s Video", image: "assets/calendar/day3.png" },
            { day: "Day 5", channel: "Email", hook: "'Last Chance' 20% Off", asset: "Countdown visual + CTA", image: "assets/calendar/day5.png" },
            { day: "Day 8", channel: "IG Live", hook: "Q&A with Breadfast Expert", asset: "Promo visual", image: "assets/calendar/day8.png" },
            { day: "Day 12", channel: "Instagram Stories", hook: "'Treat Yourself Tuesday'", asset: "Graphics + CTA", image: "assets/calendar/day12.png" },
            { day: "Day 14", channel: "Instagram / TikTok", hook: "'Shared Moments'", asset: "Reposted UGC & testimonials", image: "assets/calendar/day14.png" }
        ];

        let currentModalIndex = 0;

        function updateModalContent(index) {
            const data = calendarData[index];
            document.getElementById('modalImg').src = data.image;
            document.getElementById('modalDay').textContent = data.day;
            document.getElementById('modalDetails').textContent = `Channel: ${data.channel} | Hook: ${data.hook} | Asset: ${data.asset}`;
        }

        function openModal(index) {
            currentModalIndex = parseInt(index);
            updateModalContent(currentModalIndex);
            const modal = document.getElementById('imageModal');
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('active'), 10);
        }

        function closeModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.remove('active');
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
        }

        function nextPost() {
            currentModalIndex = (currentModalIndex + 1) % calendarData.length;
            updateModalContent(currentModalIndex);
        }

        function prevPost() {
            currentModalIndex = (currentModalIndex - 1 + calendarData.length) % calendarData.length;
            updateModalContent(currentModalIndex);
        }

        // Close modal on overlay click
        document.getElementById('imageModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('imageModal')) closeModal();
        });

        // Key navigation
        document.addEventListener('keydown', (e) => {
            if (!document.getElementById('imageModal').classList.contains('active')) return;
            if (e.key === 'ArrowRight') nextPost();
            if (e.key === 'ArrowLeft') prevPost();
            if (e.key === 'Escape') closeModal();
        });

        // Add event listeners to calendar rows
        document.addEventListener('DOMContentLoaded', () => {
            const rows = document.querySelectorAll('.calendar-row');
            rows.forEach((row, index) => {
                row.addEventListener('click', () => {
                    openModal(index);
                });
            });
        });
    </script>

    <!-- Three.js Background -->
    <script>
        // Simplified: single scene/renderer; slide visuals anchored to the right in world space.

        const slides = document.querySelectorAll('.slide');
        const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

        const colors = {
            primary: new THREE.Color(0xb2288e),
            secondary: new THREE.Color(0xedffef),
            accent: new THREE.Color(0xfdcb6e),
            ink: new THREE.Color(0x2d3436)
        };

        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0xffffff, 0.018);

        const camera = new THREE.PerspectiveCamera(55, window.innerWidth / window.innerHeight, 0.1, 80);
        camera.position.set(0, 0.4, 9.5);

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true, powerPreference: 'high-performance' });
        renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 2));
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0x000000, 0);
        renderer.outputEncoding = THREE.sRGBEncoding;
        renderer.physicallyCorrectLights = true;
        container.appendChild(renderer.domElement);

        // Lights
        scene.add(new THREE.HemisphereLight(0xffffff, 0xf3f0ff, 0.85));
        const keyLight = new THREE.DirectionalLight(0xffffff, 0.95);
        keyLight.position.set(4, 5, 6);
        scene.add(keyLight);
        const fillLight = new THREE.DirectionalLight(0xffffff, 0.45);
        fillLight.position.set(-6, -2, 8);
        scene.add(fillLight);

        // Background "bubbles" (similar to your original spheres) ‚Äî always visible.
        // Uses InstancedMesh for performance.
        function createBubbleField({ count, material, xRange, yRange, zRange }) {
            const geo = new THREE.SphereGeometry(1, 32, 32);
            const mesh = new THREE.InstancedMesh(geo, material, count);
            mesh.instanceMatrix.setUsage(THREE.DynamicDrawUsage);
            const dummy = new THREE.Object3D();

            const bubbles = new Array(count).fill(null).map(() => {
                return {
                    x: (Math.random() - 0.5) * xRange,
                    y: (Math.random() - 0.5) * yRange,
                    z: (Math.random() * zRange) - zRange - 1.5,
                    s: Math.random() * 0.9 + 0.35,
                    vy: (Math.random() * 0.35 + 0.18) * 0.6,
                    rx: (Math.random() * 0.8 + 0.2) * 0.2,
                    ry: (Math.random() * 0.8 + 0.2) * 0.2,
                    phase: Math.random() * Math.PI * 2
                };
            });

            function update(dt, t) {
                for (let i = 0; i < bubbles.length; i++) {
                    const b = bubbles[i];
                    b.y += b.vy * dt;
                    if (b.y > yRange / 2 + 2) b.y = -yRange / 2 - 2;

                    dummy.position.set(
                        b.x + Math.sin(t * 0.6 + b.phase) * 0.3,
                        b.y,
                        b.z
                    );
                    dummy.rotation.set(t * b.rx, t * b.ry, 0);
                    dummy.scale.setScalar(b.s);
                    dummy.updateMatrix();
                    mesh.setMatrixAt(i, dummy.matrix);
                }
                mesh.instanceMatrix.needsUpdate = true;
            }

            scene.add(mesh);
            return { mesh, update };
        }

        const materialPurple = new THREE.MeshPhysicalMaterial({
            color: colors.primary,
            roughness: 0.22,
            metalness: 0.1,
            clearcoat: 0.75
        });
        const materialMint = new THREE.MeshPhysicalMaterial({
            color: colors.secondary,
            roughness: 0.12,
            metalness: 0.0,
            transmission: 0.35,
            transparent: true,
            opacity: 0.85,
            clearcoat: 0.5
        });

        const bubbleFieldPurple = createBubbleField({ count: 16, material: materialPurple, xRange: 24, yRange: 18, zRange: 10 });
        const bubbleFieldMint = createBubbleField({ count: 16, material: materialMint, xRange: 24, yRange: 18, zRange: 10 });

        function roundedRectShape(width, height, radius) {
            const w = width;
            const h = height;
            const r = Math.min(radius, Math.min(w, h) / 2);
            const s = new THREE.Shape();
            s.moveTo(-w / 2 + r, -h / 2);
            s.lineTo(w / 2 - r, -h / 2);
            s.absarc(w / 2 - r, -h / 2 + r, r, -Math.PI / 2, 0, false);
            s.lineTo(w / 2, h / 2 - r);
            s.absarc(w / 2 - r, h / 2 - r, r, 0, Math.PI / 2, false);
            s.lineTo(-w / 2 + r, h / 2);
            s.absarc(-w / 2 + r, h / 2 - r, r, Math.PI / 2, Math.PI, false);
            s.lineTo(-w / 2, -h / 2 + r);
            s.absarc(-w / 2 + r, -h / 2 + r, r, Math.PI, Math.PI * 1.5, false);
            return s;
        }

        // Right-side anchor helper: place visuals to the right of slides in world space.
        function applyAnchor(group, anchor) {
            // anchor: { x, y, z }
            if (!anchor) return;
            group.position.set(anchor.x, anchor.y, anchor.z);
        }

        function makeMaterial(kind) {
            if (kind === 'glass') {
                return new THREE.MeshPhysicalMaterial({
                    color: colors.secondary,
                    roughness: 0.12,
                    metalness: 0.0,
                    transmission: 0.35,
                    transparent: true,
                    opacity: 0.9,
                    clearcoat: 0.6
                });
            }
            if (kind === 'accent') {
                return new THREE.MeshPhysicalMaterial({
                    color: colors.accent,
                    roughness: 0.3,
                    metalness: 0.25,
                    clearcoat: 0.7
                });
            }
            return new THREE.MeshPhysicalMaterial({
                color: colors.primary,
                roughness: 0.22,
                metalness: 0.15,
                clearcoat: 0.75
            });
        }

        function createCardMesh(width = 3.1, height = 2.0, thickness = 0.14, colorKind = 'primary') {
            const shape = roundedRectShape(width, height, Math.min(width, height) * 0.18);
            const geo = new THREE.ExtrudeGeometry(shape, {
                depth: thickness,
                bevelEnabled: true,
                bevelThickness: 0.05,
                bevelSize: 0.05,
                bevelSegments: 4,
                curveSegments: 20
            });
            geo.center();
            const mesh = new THREE.Mesh(geo, makeMaterial(colorKind));
            return mesh;
        }

        function createCoinStack() {
            const group = new THREE.Group();
            const coinGeo = new THREE.CylinderGeometry(0.65, 0.65, 0.16, 40, 1);
            const coinMat = makeMaterial('accent');
            for (let i = 0; i < 4; i++) {
                const c = new THREE.Mesh(coinGeo, coinMat);
                c.rotation.x = Math.PI / 2;
                c.position.z = i * 0.18;
                c.position.y = i * 0.02;
                group.add(c);
            }
            return group;
        }

        function createShield() {
            const group = new THREE.Group();
            const shieldGeo = new THREE.IcosahedronGeometry(1.25, 0);
            const shield = new THREE.Mesh(shieldGeo, makeMaterial('glass'));
            shield.scale.set(1.0, 1.25, 0.85);
            group.add(shield);
            const lockGeo = new THREE.TorusGeometry(0.45, 0.16, 12, 28);
            const lock = new THREE.Mesh(lockGeo, makeMaterial('primary'));
            lock.position.set(0, -0.05, 0.95);
            group.add(lock);
            return group;
        }

        function createBars() {
            const group = new THREE.Group();
            const barGeo = new THREE.BoxGeometry(0.65, 1, 0.65);
            const mats = [makeMaterial('primary'), makeMaterial('glass'), makeMaterial('accent')];
            const heights = [1.8, 1.2, 2.4];
            for (let i = 0; i < 3; i++) {
                const bar = new THREE.Mesh(barGeo, mats[i]);
                bar.scale.y = heights[i];
                bar.position.set((i - 1) * 0.95, (heights[i] / 2) - 0.15, 0);
                group.add(bar);
            }
            return group;
        }

        // Slide-specific visuals
        const slideGroups = new Map(); // slideId -> group
        const slideUpdaters = new Map(); // slideId -> update fn

        function ensureSlideGroup(slideId) {
            if (slideGroups.has(slideId)) return slideGroups.get(slideId);

            const group = new THREE.Group();
            group.visible = false;
            group.userData.appear = 0;
            group.userData.targetAppear = 0;
            group.userData.anchor = { x: 7.5, y: 0.4, z: -1.2 }; // further right of slides

            // Default updater (can be overridden)
            slideUpdaters.set(slideId, (t, pointer) => {
                const speed = prefersReducedMotion ? 0 : 1;
                group.rotation.y = 0.25 * Math.sin(t * 0.6) * speed + pointer.x * 0.12;
                group.rotation.x = 0.12 * Math.cos(t * 0.5) * speed + pointer.y * 0.08;
            });

            // Build a distinct visual per slide
            switch (String(slideId)) {
                case '0': {
                    // Intro: app-to-card vibe + orbiting "grocery" spheres
                    const card = createCardMesh(3.4, 2.2, 0.16, 'primary');
                    card.rotation.x = -0.18;
                    card.rotation.y = 0.35;
                    group.add(card);
                    const orbGeo = new THREE.SphereGeometry(0.22, 24, 24);
                    const orbMats = [makeMaterial('glass'), makeMaterial('accent')];
                    const orbiters = new THREE.Group();
                    for (let i = 0; i < 8; i++) {
                        const o = new THREE.Mesh(orbGeo, orbMats[i % orbMats.length]);
                        o.position.set(Math.cos(i) * 2.0, Math.sin(i * 1.3) * 1.2, (Math.random() - 0.5) * 0.6);
                        orbiters.add(o);
                    }
                    group.add(orbiters);
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        orbiters.rotation.y = t * 0.65 * speed;
                        orbiters.rotation.x = t * 0.35 * speed;
                        card.rotation.y = 0.35 + Math.sin(t * 0.55) * 0.18 * speed + pointer.x * 0.12;
                        card.rotation.x = -0.18 + Math.cos(t * 0.45) * 0.10 * speed + pointer.y * 0.08;
                    });
                    break;
                }
                case '1': {
                    // Brand & challenge: card + question "knot"
                    const card = createCardMesh(3.2, 2.0, 0.14, 'glass');
                    card.rotation.y = -0.35;
                    group.add(card);
                    const knot = new THREE.Mesh(
                        new THREE.TorusKnotGeometry(0.65, 0.18, 120, 16),
                        makeMaterial('primary')
                    );
                    knot.position.set(-0.8, 0.2, 0.9);
                    group.add(knot);
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        knot.rotation.x = t * 0.9 * speed;
                        knot.rotation.y = t * 0.75 * speed;
                        group.rotation.y = pointer.x * 0.14;
                        group.rotation.x = pointer.y * 0.1;
                    });
                    break;
                }
                case '2': {
                    // Persona: friendly "avatar" + halo
                    const head = new THREE.Mesh(new THREE.SphereGeometry(0.75, 32, 32), makeMaterial('primary'));
                    const body = new THREE.Mesh(new THREE.SphereGeometry(1.0, 32, 32), makeMaterial('glass'));
                    body.scale.set(1.1, 0.85, 0.9);
                    body.position.set(0, -1.0, 0);
                    const halo = new THREE.Mesh(new THREE.TorusGeometry(1.15, 0.08, 12, 40), makeMaterial('accent'));
                    halo.rotation.x = Math.PI / 2;
                    halo.position.set(0, 0.2, 0.2);
                    group.add(head, body, halo);
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        halo.rotation.z = t * 0.7 * speed;
                        head.position.y = 0.05 * Math.sin(t * 1.3) * speed;
                        group.rotation.y = pointer.x * 0.12;
                        group.rotation.x = pointer.y * 0.08;
                    });
                    break;
                }
                case '3': {
                    // Objectives: 3D bars + ring
                    const bars = createBars();
                    bars.position.set(0.2, -1.2, 0);
                    group.add(bars);
                    const ring = new THREE.Mesh(new THREE.TorusGeometry(1.45, 0.1, 12, 64), makeMaterial('primary'));
                    ring.rotation.x = Math.PI / 2.2;
                    ring.position.set(-0.3, 0.4, 0.4);
                    group.add(ring);
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        bars.children.forEach((b, i) => {
                            b.rotation.y = (t * 0.5 + i) * 0.4 * speed;
                        });
                        ring.rotation.z = t * 0.55 * speed;
                        group.rotation.y = pointer.x * 0.12;
                        group.rotation.x = pointer.y * 0.08;
                    });
                    break;
                }
                case '4': {
                    // Strategy: "message house" (roof + base)
                    const base = new THREE.Mesh(new THREE.BoxGeometry(2.2, 1.6, 0.55), makeMaterial('glass'));
                    base.position.set(0, -0.55, 0);
                    const roof = new THREE.Mesh(new THREE.ConeGeometry(1.55, 1.0, 4, 1), makeMaterial('primary'));
                    roof.rotation.y = Math.PI / 4;
                    roof.position.set(0, 0.55, 0);
                    const door = new THREE.Mesh(new THREE.BoxGeometry(0.55, 0.85, 0.12), makeMaterial('accent'));
                    door.position.set(0, -0.9, 0.35);
                    group.add(base, roof, door);
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        group.rotation.y = 0.15 * Math.sin(t * 0.6) * speed + pointer.x * 0.12;
                        group.rotation.x = 0.08 * Math.cos(t * 0.5) * speed + pointer.y * 0.08;
                    });
                    break;
                }
                case '5': {
                    // PESO: 4 floating tiles
                    const tileGeo = new THREE.BoxGeometry(1.05, 0.75, 0.18);
                    const tileMats = [makeMaterial('primary'), makeMaterial('glass'), makeMaterial('accent'), makeMaterial('glass')];
                    const tiles = [];
                    const positions = [
                        [-0.65, 0.5, 0],
                        [0.65, 0.5, 0],
                        [-0.65, -0.5, 0],
                        [0.65, -0.5, 0]
                    ];
                    for (let i = 0; i < 4; i++) {
                        const tMesh = new THREE.Mesh(tileGeo, tileMats[i]);
                        tMesh.position.set(...positions[i]);
                        tMesh.rotation.y = (i % 2 ? 0.2 : -0.2);
                        tiles.push(tMesh);
                        group.add(tMesh);
                    }
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        tiles.forEach((m, i) => {
                            m.position.z = 0.12 * Math.sin(t * 1.1 + i) * speed;
                            m.rotation.x = 0.08 * Math.cos(t * 0.9 + i) * speed;
                        });
                        group.rotation.y = pointer.x * 0.14;
                        group.rotation.x = pointer.y * 0.1;
                    });
                    break;
                }
                case '6': {
                    // Calendar highlights: calendar plate + pin
                    const plate = new THREE.Mesh(new THREE.BoxGeometry(2.4, 1.8, 0.22), makeMaterial('glass'));
                    const header = new THREE.Mesh(new THREE.BoxGeometry(2.4, 0.35, 0.24), makeMaterial('primary'));
                    header.position.set(0, 0.72, 0.05);
                    const pin = new THREE.Mesh(new THREE.ConeGeometry(0.25, 0.7, 24, 1), makeMaterial('accent'));
                    pin.rotation.x = Math.PI;
                    pin.position.set(0.65, 0.15, 0.25);
                    group.add(plate, header, pin);
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        pin.position.y = 0.15 + 0.08 * Math.sin(t * 1.6) * speed;
                        group.rotation.y = 0.18 * Math.sin(t * 0.5) * speed + pointer.x * 0.12;
                        group.rotation.x = pointer.y * 0.08;
                    });
                    break;
                }
                case '7': {
                    // Key visual prompts: spotlight cone + card
                    const card = createCardMesh(3.0, 1.9, 0.12, 'primary');
                    card.rotation.y = 0.35;
                    const cone = new THREE.Mesh(new THREE.ConeGeometry(1.6, 3.2, 32, 1, true), new THREE.MeshPhysicalMaterial({
                        color: colors.accent,
                        roughness: 0.3,
                        metalness: 0.0,
                        transmission: 0.6,
                        transparent: true,
                        opacity: 0.25,
                        side: THREE.DoubleSide,
                        depthWrite: false
                    }));
                    cone.position.set(0.4, 1.3, -0.2);
                    cone.rotation.x = Math.PI;
                    group.add(card, cone);
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        cone.rotation.z = 0.15 * Math.sin(t * 0.9) * speed;
                        card.rotation.y = 0.35 + Math.sin(t * 0.6) * 0.15 * speed + pointer.x * 0.12;
                        group.rotation.x = pointer.y * 0.08;
                    });
                    break;
                }
                case '8': {
                    // Creators: 3 profile tiles orbit
                    const tileGeo = new THREE.BoxGeometry(1.0, 1.2, 0.18);
                    const mats = [makeMaterial('primary'), makeMaterial('glass'), makeMaterial('accent')];
                    const tiles = [];
                    for (let i = 0; i < 3; i++) {
                        const m = new THREE.Mesh(tileGeo, mats[i]);
                        m.position.set((i - 1) * 1.2, (i === 1 ? 0.2 : -0.15), i * 0.12);
                        tiles.push(m);
                        group.add(m);
                    }
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        tiles.forEach((m, i) => {
                            m.rotation.y = (t * 0.5 + i) * 0.55 * speed;
                            m.position.y = (i === 1 ? 0.2 : -0.15) + 0.08 * Math.sin(t * 1.2 + i) * speed;
                        });
                        group.rotation.y = pointer.x * 0.14;
                        group.rotation.x = pointer.y * 0.1;
                    });
                    break;
                }
                case '9': {
                    // Onboarding: 3 nodes connected
                    const nodeGeo = new THREE.SphereGeometry(0.35, 24, 24);
                    const n1 = new THREE.Mesh(nodeGeo, makeMaterial('primary'));
                    const n2 = new THREE.Mesh(nodeGeo, makeMaterial('accent'));
                    const n3 = new THREE.Mesh(nodeGeo, makeMaterial('glass'));
                    n1.position.set(-1.4, 0.25, 0);
                    n2.position.set(0, -0.1, 0);
                    n3.position.set(1.4, 0.25, 0);
                    const lineMat = new THREE.LineBasicMaterial({ color: 0xb2288e, transparent: true, opacity: 0.35 });
                    const lineGeo = new THREE.BufferGeometry().setFromPoints([n1.position, n2.position, n3.position]);
                    const path = new THREE.Line(lineGeo, lineMat);
                    group.add(path, n1, n2, n3);
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        const pulse = 0.12 * Math.sin(t * 2.0) * speed;
                        n2.scale.setScalar(1 + pulse);
                        group.rotation.y = pointer.x * 0.12;
                        group.rotation.x = pointer.y * 0.08;
                    });
                    break;
                }
                case '10': {
                    // Community: chat bubbles
                    const bubble1 = createCardMesh(2.3, 1.4, 0.12, 'glass');
                    const bubble2 = createCardMesh(2.0, 1.2, 0.12, 'primary');
                    bubble1.position.set(-0.35, 0.25, 0);
                    bubble2.position.set(0.65, -0.35, 0.2);
                    bubble2.rotation.z = 0.08;
                    group.add(bubble1, bubble2);
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        bubble1.position.y = 0.25 + 0.08 * Math.sin(t * 1.1) * speed;
                        bubble2.position.y = -0.35 + 0.08 * Math.cos(t * 1.2) * speed;
                        group.rotation.y = pointer.x * 0.14;
                        group.rotation.x = pointer.y * 0.1;
                    });
                    break;
                }
                case '11': {
                    // Measurement & finance: chart + coins
                    const bars = createBars();
                    bars.scale.set(0.85, 0.85, 0.85);
                    bars.position.set(-0.4, -1.0, 0);
                    const coins = createCoinStack();
                    coins.position.set(1.4, -0.9, 0.2);
                    group.add(bars, coins);
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        coins.rotation.z = t * 0.7 * speed;
                        bars.children.forEach((b, i) => (b.rotation.y = (t * 0.5 + i) * 0.55 * speed));
                        group.rotation.y = pointer.x * 0.12;
                        group.rotation.x = pointer.y * 0.08;
                    });
                    break;
                }
                case '12': {
                    // Risks & ethics: shield/lock
                    const shield = createShield();
                    group.add(shield);
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        shield.rotation.y = t * 0.45 * speed + pointer.x * 0.12;
                        shield.rotation.x = 0.12 * Math.sin(t * 0.7) * speed + pointer.y * 0.08;
                    });
                    break;
                }
                case 'lp': {
                    // Landing Page: 3D Laptop/Browser frame
                    const laptopBase = new THREE.Mesh(new THREE.BoxGeometry(2.8, 0.1, 1.8), makeMaterial('primary'));
                    laptopBase.position.y = -1.0;
                    const screenGeo = new THREE.BoxGeometry(2.8, 1.8, 0.1);
                    const screenFrame = new THREE.Mesh(screenGeo, makeMaterial('accent'));
                    screenFrame.position.set(0, 0.2, -0.9);
                    screenFrame.rotation.x = 0.2; // slight tilt

                    // Simple "webpage" planes inside
                    const page = new THREE.Mesh(new THREE.PlaneGeometry(2.4, 1.4), new THREE.MeshBasicMaterial({ color: 0xffffff }));
                    page.position.set(0, 0.2, -0.84);
                    page.rotation.x = 0.2;

                    group.add(laptopBase, screenFrame, page);

                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        group.rotation.y = 0.15 * Math.sin(t * 0.5) * speed + pointer.x * 0.1;
                        group.rotation.x = pointer.y * 0.05;
                    });
                    break;
                }
                case 'summary-extra': {
                    // Summary Extra: A combination of elements
                    const card = createCardMesh(3.2, 2.0, 0.14, 'primary');
                    const gear = new THREE.Mesh(new THREE.TorusKnotGeometry(0.5, 0.15, 100, 16), makeMaterial('accent'));
                    gear.position.set(1.0, 0.5, 0.5);
                    group.add(card, gear);
                    slideUpdaters.set(slideId, (t, pointer) => {
                        const speed = prefersReducedMotion ? 0 : 1;
                        gear.rotation.y = t * 0.8 * speed;
                        card.rotation.y = 0.2 * Math.sin(t * 0.5) * speed + pointer.x * 0.1;
                        group.rotation.x = pointer.y * 0.05;
                    });
                    break;
                }
                default: {
                    // Fallback (shouldn't happen with current slides)
                    const blob = new THREE.Mesh(new THREE.IcosahedronGeometry(1.4, 1), makeMaterial('primary'));
                    group.add(blob);
                }
            }

            applyAnchor(group, group.userData.anchor);
            scene.add(group);
            slideGroups.set(slideId, group);
            return group;
        }

        let activeSlideId = null;

        function setActiveSlideVisual(slideId) {
            activeSlideId = slideId;

            // Ensure all groups exist so "every slide" truly has one.
            slides.forEach((s) => ensureSlideGroup(s.dataset.id));

            slideGroups.forEach((g, id) => {
                const isActive = String(id) === String(slideId);
                g.visible = true;
                g.userData.targetAppear = isActive ? 1 : 0;
                if (isActive) {
                    g.userData.appear = 1;
                    g.scale.setScalar(1);
                }
            });
        }

        const pointer = { x: 0, y: 0 };
        window.addEventListener('pointermove', (e) => {
            const nx = (e.clientX / window.innerWidth) * 2 - 1;
            const ny = -((e.clientY / window.innerHeight) * 2 - 1);
            pointer.x = nx;
            pointer.y = ny;
        }, { passive: true });

        function resize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 2));
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        window.addEventListener('resize', resize);

        let running = true;
        document.addEventListener('visibilitychange', () => {
            running = document.visibilityState === 'visible';
        });

        const clock = new THREE.Clock();
        function tick() {
            requestAnimationFrame(tick);
            if (!running) return;

            const dt = Math.min(clock.getDelta(), 0.05);
            const t = clock.getElapsedTime();

            // Background bubbles always animate (this brings back your old vibe).
            if (!prefersReducedMotion) {
                bubbleFieldPurple.update(dt, t);
                bubbleFieldMint.update(dt, t + 0.8);
            }

            // Smooth appear / disappear
            slideGroups.forEach((g, id) => {
                const speed = prefersReducedMotion ? 0.08 : 0.12;
                g.userData.appear += (g.userData.targetAppear - g.userData.appear) * speed;
                const s = 0.75 + 0.25 * g.userData.appear;
                g.scale.setScalar(s);

                // Hide groups when fully faded out
                if (String(id) !== String(activeSlideId) && g.userData.appear < 0.02) {
                    g.visible = false;
                } else {
                    g.visible = true;
                }
            });

            // Only update the active visual (and keep others cheap)
            if (activeSlideId != null) {
                const updater = slideUpdaters.get(activeSlideId);
                const g = slideGroups.get(activeSlideId);
                if (g && updater) updater(t, pointer);
            }

            renderer.render(scene, camera);
        }
        tick();

        /* Navigation Logic */
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const currentSpan = document.getElementById('current');
        const totalSpan = document.getElementById('total');
        let currentIndex = 0;

        function updateSlides() {
            slides.forEach((slide, index) => {
                slide.classList.remove('active');
                if (index === currentIndex) slide.classList.add('active');
            });
            currentSpan.textContent = currentIndex;
            totalSpan.textContent = slides.length - 2; // Subtracting the Intro and the hidden Summary

            const slideEl = slides[currentIndex];
            if (slideEl && slideEl.dataset && slideEl.dataset.id != null) {
                setActiveSlideVisual(slideEl.dataset.id);
            }
        }

        // Initialize per-slide 3D visuals on load (after layout)
        setTimeout(() => {
            setActiveSlideVisual(slides[currentIndex]?.dataset?.id ?? '0');
            resize();
        }, 50);

        nextBtn.addEventListener('click', () => {
            if (currentIndex < slides.length - 2) { // Skip the hidden summary slide
                currentIndex++;
                updateSlides();
            }
        });

        prevBtn.addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex--;
                updateSlides();
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') nextBtn.click();
            if (e.key === 'ArrowLeft') prevBtn.click();
        });
    </script>
</body>

</html>